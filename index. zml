<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoPro - Professional Crypto Trading Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0B0E11;
            --bg-secondary: #161A1E;
            --bg-tertiary: #1E2329;
            --border-color: #2B3139;
            --text-primary: #EAECEF;
            --text-secondary: #848E9C;
            --accent-green: #0ECB81;
            --accent-red: #F6465D;
            --accent-yellow: #FCD535;
            --accent-blue: #00d9ff;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Layer System */
        .layer {
            display: none;
            min-height: 100vh;
            animation: fadeIn 0.5s ease-out;
        }
        .layer.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        @keyframes slideIn {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideLeft {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        /* Referral Success Banner */
        .referral-success-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #0ECB81, #0B8F5F);
            padding: 20px;
            text-align: center;
            z-index: 9999;
            box-shadow: 0 4px 20px rgba(14, 203, 129, 0.4);
            animation: slideIn 0.5s ease-out;
            display: none;
        }

        .referral-success-banner.show {
            display: block;
        }

        .referral-success-content h2 {
            font-size: 28px;
            margin-bottom: 8px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .referral-success-content p {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .bonus-highlight {
            display: inline-block;
            font-size: 42px;
            font-weight: 900;
            color: #FCD535;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            margin: 12px 0;
            animation: pulse 2s infinite;
        }

        .close-banner {
            position: absolute;
            top: 10px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-banner:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        /* Navbar */
        .navbar {
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-green);
            cursor: pointer;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-login {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }

        .btn-signup {
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
            border: none;
        }

        .btn-signup:hover, .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(14, 203, 129, 0.4);
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(14, 203, 129, 0.1);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: var(--accent-green);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--accent-green);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Container */
        .container {
            max-width: 1920px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, rgba(14, 203, 129, 0.1), rgba(0, 217, 255, 0.1));
            border: 2px solid var(--accent-green);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 20px;
            text-align: center;
        }

        .hero-section h1 {
            font-size: 48px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
        }

        .hero-section p {
            font-size: 18px;
            color: var(--text-primary);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .hero-cta {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hero-btn-primary {
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
        }

        .hero-btn-secondary {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }

        .hero-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(14, 203, 129, 0.4);
        }

        /* Live Traders Ticker */
        .live-traders-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .live-traders-title {
            text-align: center;
            color: var(--accent-green);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ticker-wrapper {
            overflow: hidden;
            position: relative;
        }

        .ticker-content {
            display: flex;
            animation: slideLeft 60s linear infinite;
            white-space: nowrap;
        }

        .trader-card {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            margin-right: 16px;
            border: 1px solid var(--border-color);
            min-width: 250px;
        }

        .trader-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .trader-info {
            flex: 1;
        }

        .trader-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        .trader-profit {
            font-weight: 700;
            color: var(--accent-green);
            font-size: 16px;
        }

        /* Top Winners Section */
        .top-winners-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .top-winners-title {
            color: var(--accent-green);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .winners-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }

        .winner-card {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .winner-card:hover {
            border-color: var(--accent-green);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(14, 203, 129, 0.3);
        }

        .winner-rank {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: #000;
            font-size: 16px;
        }

        .winner-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .winner-avatar-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .winner-details h4 {
            font-size: 18px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .winner-location {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .winner-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .winner-stat {
            background: rgba(14, 203, 129, 0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .winner-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .winner-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-green);
        }

        /* Stats Grid */
        .stats-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .stat-card {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .stat-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-green);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Account Balance Widget */
        .account-balance-widget {
            background: linear-gradient(135deg, rgba(14, 203, 129, 0.2), rgba(0, 217, 255, 0.2));
            border: 2px solid var(--accent-green);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .account-type-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .account-type-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 14px;
        }

        .account-type-btn.active {
            border-color: var(--accent-green);
            background: rgba(14, 203, 129, 0.2);
            color: var(--accent-green);
        }

        .balance-display {
            text-align: center;
            margin: 20px 0;
        }

        .balance-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-amount {
            font-size: 48px;
            font-weight: 900;
            color: var(--accent-green);
            text-shadow: 0 0 20px rgba(14, 203, 129, 0.5);
        }

        .balance-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .balance-info-item {
            text-align: center;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .balance-info-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .balance-info-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* Trading Pair Header */
        .pair-header {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .pair-selector {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .pair-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #F7931A, #FFA500);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        .pair-select {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            outline: none;
        }

        .price-display {
            display: flex;
            align-items: baseline;
            gap: 16px;
            flex-wrap: wrap;
        }

        .main-price {
            font-size: 36px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .price-change {
            font-size: 18px;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 6px;
        }

        .price-change.positive {
            color: var(--accent-green);
            background: rgba(14, 203, 129, 0.1);
        }

        .price-change.negative {
            color: var(--accent-red);
            background: rgba(246, 70, 93, 0.1);
        }

        .pair-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .stat-box {
            background: var(--bg-tertiary);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .stat-box-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .stat-box-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Chart Section */
        .chart-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .chart-btn {
            padding: 8px 14px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .chart-btn.active {
            background: var(--accent-green);
            border-color: var(--accent-green);
            color: var(--bg-primary);
        }

        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 400px;
            margin-top: 16px;
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 20px;
        }

        .chart-wrapper.small {
            height: 200px;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Grid Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 1024px) {
            .grid-2 {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Order Book */
        .orderbook-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .orderbook-title {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
        }

        .orderbook-headers {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 8px;
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .orderbook-headers > div:nth-child(2),
        .orderbook-headers > div:nth-child(3) {
            text-align: right;
        }

        .orderbook-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 5px 0;
            font-size: 13px;
            font-family: 'Monaco', 'Courier New', monospace;
        }

        .orderbook-row > div:nth-child(2),
        .orderbook-row > div:nth-child(3) {
            text-align: right;
        }

        .price-ask { color: var(--accent-red); font-weight: 600; }
        .price-bid { color: var(--accent-green); font-weight: 600; }

        .orderbook-spread {
            text-align: center;
            padding: 12px;
            margin: 8px 0;
            background: var(--bg-tertiary);
            border-radius: 6px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .spread-value {
            color: var(--accent-yellow);
            font-weight: 600;
        }

        /* Recent Trades */
        .trades-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .trade-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 6px 0;
            font-size: 13px;
            font-family: 'Monaco', 'Courier New', monospace;
            border-bottom: 1px solid rgba(43, 49, 57, 0.3);
        }

        .trade-row > div:nth-child(2),
        .trade-row > div:nth-child(3) {
            text-align: right;
        }

        /* Auth Pages */
        .auth-container {
            max-width: 480px;
            margin: 80px auto;
            padding: 40px;
            background: var(--bg-secondary);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            border: 1px solid var(--border-color);
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .auth-logo-icon {
            font-size: 60px;
            margin-bottom: 12px;
            animation: pulse 2s infinite;
        }

        .auth-logo-text {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .auth-title {
            text-align: center;
            margin-bottom: 24px;
            font-size: 24px;
            color: var(--accent-green);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 0 3px rgba(14, 203, 129, 0.1);
        }

        .btn-submit {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(14, 203, 129, 0.4);
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .alert.show { display: block; }

        .alert-success {
            background: rgba(14, 203, 129, 0.1);
            border: 1px solid rgba(14, 203, 129, 0.3);
            color: var(--accent-green);
        }

        .alert-error {
            background: rgba(246, 70, 93, 0.1);
            border: 1px solid rgba(246, 70, 93, 0.3);
            color: var(--accent-red);
        }

        .alert-warning {
            background: rgba(252, 213, 53, 0.1);
            border: 1px solid rgba(252, 213, 53, 0.3);
            color: var(--accent-yellow);
        }

        .auth-divider {
            text-align: center;
            margin: 24px 0;
            position: relative;
        }

        .auth-divider::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: var(--border-color);
        }

        .auth-divider span {
            background: var(--bg-secondary);
            padding: 0 12px;
            position: relative;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .auth-link {
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .auth-link a {
            color: var(--accent-green);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-group label {
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            margin-bottom: 0;
        }

        /* Referral Share Box */
        .share-referral-box {
            background: linear-gradient(135deg, rgba(14, 203, 129, 0.1), rgba(0, 217, 255, 0.1));
            border: 2px solid var(--accent-green);
            border-radius: 16px;
            padding: 24px;
            margin-top: 24px;
        }

        .share-referral-box h3 {
            color: var(--accent-green);
            font-size: 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-referral-box p {
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .referral-link-box {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 12px;
            font-family: 'Monaco', 'Courier New', monospace;
            color: var(--accent-green);
            font-size: 13px;
            word-break: break-all;
            margin-bottom: 12px;
        }

        .share-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .share-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .share-btn-copy {
            background: linear-gradient(135deg, var(--accent-blue), #0099cc);
            color: #fff;
        }

        .share-btn-whatsapp {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: #fff;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Dashboard */
        .dashboard-header {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            border: 1px solid var(--border-color);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .btn-logout {
            background: rgba(246, 70, 93, 0.1);
            color: var(--accent-red);
            padding: 10px 20px;
            border: 1px solid var(--accent-red);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 14px;
        }

        .btn-logout:hover {
            background: rgba(246, 70, 93, 0.2);
        }

        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .action-btn {
            padding: 20px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn-trade {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #000;
        }

        .btn-deposit {
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
        }

        .btn-withdraw {
            background: linear-gradient(135deg, var(--accent-red), #cc0055);
            color: #fff;
        }

        .btn-portfolio {
            background: linear-gradient(135deg, var(--accent-blue), #0099cc);
            color: #fff;
        }

        .btn-referrals {
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: #fff;
        }

        .btn-reviews {
            background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
            color: #000;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 24px;
            padding: 32px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            color: var(--accent-green);
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 24px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* WhatsApp Support */
        .whatsapp-support {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        .whatsapp-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: 16px 24px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);
            transition: all 0.3s;
        }

        .whatsapp-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(37, 211, 102, 0.6);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 12px; }
            .main-price { font-size: 28px; }
            .chart-wrapper { height: 300px; }
            .nav-links { gap: 10px; }
            .nav-btn { padding: 8px 16px; font-size: 12px; }
            .share-buttons { flex-direction: column; }
            .share-btn { width: 100%; }
            .hero-section h1 { font-size: 32px; }
            .action-buttons { grid-template-columns: 1fr; }
            .balance-amount { font-size: 36px; }
        }
    </style>
</head>
<body>

<!-- Referral Success Banner -->
<div id="referralSuccessBanner" class="referral-success-banner">
    <button class="close-banner" onclick="closeReferralBanner()">√ó</button>
    <div class="referral-success-content">
        <h2>üéâ CONGRATULATIONS! üéâ</h2>
        <p><strong id="referrerName">Your friend</strong> has been crushing it with CryptoPro!</p>
        <p>They're making <strong>consistent daily profits</strong> with our AI-powered trading bots.</p>
        <div class="bonus-highlight">GET $25 BONUS!</div>
        <p style="font-size: 18px; margin-top: 12px;">
            ‚úÖ Sign up now and receive <strong>$25 instant bonus</strong><br>
            ‚úÖ 100% withdrawable after verification<br>
            ‚úÖ Start trading with real profits from day one!
        </p>
    </div>
</div>

<!-- LAYER 1: Welcome/Home Page -->
<div id="welcomeLayer" class="layer active">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1>üöÄ The Future of Crypto Trading</h1>
            <p>Join 50,000+ successful traders earning daily profits with AI-powered automation. Get started with a <strong>$25 signup bonus</strong> and experience professional trading today!</p>
            <div class="hero-cta">
                <button class="hero-btn hero-btn-primary" onclick="showLayer('signupLayer')">Get Started - Free $25 Bonus</button>
                <button class="hero-btn hero-btn-secondary" onclick="showLayer('chartsLayer')">View Live Charts</button>
            </div>
        </div>

        <!-- Live Active Traders Ticker -->
        <div class="live-traders-section">
            <div class="live-traders-title">üî• LIVE ACTIVE TRADERS - REAL-TIME PROFITS üî•</div>
            <div class="ticker-wrapper">
                <div class="ticker-content" id="liveTradersTicker"></div>
            </div>
        </div>

        <!-- Top Winners Section -->
        <div class="top-winners-section">
            <div class="top-winners-title">üèÜ Top Traders This Week</div>
            <div class="winners-grid" id="topWinnersGrid"></div>
        </div>

        <!-- Platform Stats -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value">50,000+</div>
                    <div class="stat-label">Active Traders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value">$125M+</div>
                    <div class="stat-label">Total Profits Paid</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value">98.5%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-value">15,000+</div>
                    <div class="stat-label">Daily Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üåç</div>
                    <div class="stat-value">150+</div>
                    <div class="stat-label">Countries</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-value">24/7</div>
                    <div class="stat-label">Trading Support</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="action-buttons">
            <button class="action-btn btn-reviews" onclick="showLayer('reviewsLayer')">‚≠ê See Reviews</button>
            <button class="action-btn btn-trade" onclick="showLayer('signupLayer')">üìä Start Trading</button>
            <button class="action-btn btn-deposit" onclick="showLayer('chartsLayer')">üìà View Charts</button>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 2: Charts & Market Data -->
<div id="chartsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>LIVE</span>
            </div>
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <!-- Trading Pair Header -->
        <div class="pair-header">
            <div class="pair-selector">
                <div class="pair-icon" id="chartsPairIcon">‚Çø</div>
                <select class="pair-select" id="chartsSymbolSelect">
                    <option value="BTCUSDT">BTC/USDT</option>
                    <option value="ETHUSDT">ETH/USDT</option>
                    <option value="BNBUSDT">BNB/USDT</option>
                    <option value="SOLUSDT">SOL/USDT</option>
                    <option value="XRPUSDT">XRP/USDT</option>
                    <option value="ADAUSDT">ADA/USDT</option>
                </select>
            </div>
            
            <div class="price-display">
                <div class="main-price" id="chartsMainPrice">$98,245.50</div>
                <div class="price-change positive" id="chartsMainChange">+2.45%</div>
            </div>

            <div class="pair-stats-grid">
                <div class="stat-box">
                    <div class="stat-box-label">24h High</div>
                    <div class="stat-box-value" id="chartsStat24hHigh">$99,120</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">24h Low</div>
                    <div class="stat-box-value" id="chartsStat24hLow">$96,800</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">24h Volume</div>
                    <div class="stat-box-value" id="chartsStat24hVolume">28.5B</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Market Cap</div>
                    <div class="stat-box-value" id="chartsStatMarketCap">$1.92T</div>
                </div>
            </div>
        </div>

        <!-- Main Chart -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üìà</span>
                    <span>Live Price Chart</span>
                </div>
                <div class="chart-controls">
                    <button class="chart-btn">1m</button>
                    <button class="chart-btn">5m</button>
                    <button class="chart-btn active">15m</button>
                    <button class="chart-btn">1h</button>
                    <button class="chart-btn">4h</button>
                    <button class="chart-btn">1D</button>
                </div>
            </div>
            <div class="chart-wrapper">
                <canvas id="chartsPriceCanvas"></canvas>
            </div>
        </div>

        <!-- Volume & RSI Charts -->
        <div class="grid-2">
            <div class="chart-section">
                <div class="chart-header">
                    <div class="chart-title">
                        <span>üìä</span>
                        <span>Volume Analysis</span>
                    </div>
                </div>
                <div class="chart-wrapper small">
                    <canvas id="chartsVolumeCanvas"></canvas>
                </div>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <div class="chart-title">
                        <span>üìâ</span>
                        <span>RSI Indicator (14)</span>
                    </div>
                </div>
                <div class="chart-wrapper small">
                    <canvas id="chartsRsiCanvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Order Book & Recent Trades -->
        <div class="grid-2">
            <div class="orderbook-container">
                <div class="orderbook-title">Order Book</div>
                <div class="orderbook-headers">
                    <div>Price (USDT)</div>
                    <div>Amount</div>
                    <div>Total</div>
                </div>
                <div id="chartsAskOrdersContainer"></div>
                <div class="orderbook-spread">
                    Spread: <span class="spread-value" id="chartsSpreadValue">48.50</span> (<span id="chartsSpreadPercent">0.049%</span>)
                </div>
                <div id="chartsBidOrdersContainer"></div>
            </div>

            <div class="trades-container">
                <div class="orderbook-title">Recent Trades</div>
                <div class="orderbook-headers">
                    <div>Price (USDT)</div>
                    <div>Amount</div>
                    <div>Time</div>
                </div>
                <div id="chartsRecentTradesContainer"></div>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 3: Signup -->
<div id="signupLayer" class="layer">
    <div class="auth-container">
        <div class="auth-logo">
            <div class="auth-logo-icon">üíé</div>
            <div class="auth-logo-text">CryptoPro</div>
        </div>
        <h2 class="auth-title">Start Your Trading Journey</h2>
        <div id="signupAlert" class="alert"></div>
        <form id="signupForm" onsubmit="handleSignup(event)">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="signupEmail" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" id="signupPhone" placeholder="+254 712 345 678" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="signupPassword" placeholder="Create strong password" required>
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" id="signupConfirm" placeholder="Re-enter password" required>
            </div>
            <div class="form-group">
                <label>Referral Code (Optional)</label>
                <input type="text" id="signupReferralCode" placeholder="Enter referral code">
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="signupTerms" required>
                <label for="signupTerms">I agree to Terms & Conditions</label>
            </div>
            <button type="submit" class="btn-submit">üöÄ Create Account & Get $25 Bonus</button>
        </form>

        <div class="share-referral-box">
            <h3>üéÅ Earn $25 Per Referral!</h3>
            <p>Share CryptoPro with friends and earn <strong>$25 instant bonus</strong> for each successful referral. All bonuses are 100% withdrawable!</p>
        </div>

        <div class="auth-divider"><span>Already have an account?</span></div>
        <div class="auth-link"><a onclick="showLayer('loginLayer')">Login Here</a></div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 4: Login -->
<div id="loginLayer" class="layer">
    <div class="auth-container">
        <div class="auth-logo">
            <div class="auth-logo-icon">üíé</div>
            <div class="auth-logo-text">CryptoPro</div>
        </div>
        <h2 class="auth-title">Welcome Back</h2>
        <div id="loginAlert" class="alert"></div>
        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="loginEmail" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" required>
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="loginRemember">
                <label for="loginRemember">Remember me</label>
            </div>
            <button type="submit" class="btn-submit">üîê Login</button>
        </form>
        <div class="auth-divider"><span>Don't have an account?</span></div>
        <div class="auth-link"><a onclick="showLayer('signupLayer')">Create Account</a></div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 5: Dashboard -->
<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>LIVE</span>
            </div>
            <button class="btn-logout" onclick="handleLogout()">Logout</button>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard-header">
            <div class="user-info">
                <div class="user-avatar">üë§</div>
                <div>
                    <div style="font-size: 16px; font-weight: 600;" id="userName">User</div>
                    <div style="font-size: 12px; opacity: 0.7;" id="userEmail">email@example.com</div>
                </div>
            </div>
        </div>

        <!-- Account Balance Widget -->
        <div class="account-balance-widget">
            <div class="account-type-selector">
                <button id="demoAccountBtn" class="account-type-btn active" onclick="switchAccountType('demo')">
                    üéÆ Demo Account
                </button>
                <button id="realAccountBtn" class="account-type-btn" onclick="switchAccountType('real')">
                    üí∞ Real Account
                </button>
            </div>
            <div class="balance-display">
                <div class="balance-label" id="balanceLabel">DEMO BALANCE</div>
                <div class="balance-amount" id="balanceAmount">$25.00</div>
            </div>
            <div class="balance-info">
                <div class="balance-info-item">
                    <div class="balance-info-label">Available</div>
                    <div class="balance-info-value" id="dashAvailableBalance">$25.00</div>
                </div>
                <div class="balance-info-item">
                    <div class="balance-info-label">In Trades</div>
                    <div class="balance-info-value">$0.00</div>
                </div>
                <div class="balance-info-item">
                    <div class="balance-info-label">Profit/Loss</div>
                    <div class="balance-info-value" style="color: var(--accent-green);">$0.00</div>
                </div>
            </div>
        </div>

        <!-- Quick Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn btn-trade" onclick="showLayer('tradingLayer')">‚ö° Trade Now</button>
            <button class="action-btn btn-deposit" onclick="alert('Deposit feature - Coming in next layers')">üí∞ Deposit</button>
            <button class="action-btn btn-withdraw" onclick="alert('Withdraw feature - Coming in next layers')">üí∏ Withdraw</button>
            <button class="action-btn btn-portfolio" onclick="alert('Portfolio feature - Coming in next layers')">üìä Portfolio</button>
            <button class="action-btn btn-referrals" onclick="alert('Referrals feature - Coming in next layers')">üéÅ Referrals</button>
            <button class="action-btn btn-reviews" onclick="alert('Reviews feature - Coming in next layers')">‚≠ê Reviews</button>
        </div>

        <!-- Latest Market Overview -->
        <div class="pair-header">
            <div class="pair-selector">
                <div class="pair-icon" id="dashPairIcon">‚Çø</div>
                <select class="pair-select" id="dashSymbolSelect">
                    <option value="BTCUSDT">BTC/USDT</option>
                    <option value="ETHUSDT">ETH/USDT</option>
                    <option value="BNBUSDT">BNB/USDT</option>
                    <option value="SOLUSDT">SOL/USDT</option>
                    <option value="XRPUSDT">XRP/USDT</option>
                    <option value="ADAUSDT">ADA/USDT</option>
                </select>
            </div>
            
            <div class="price-display">
                <div class="main-price" id="dashMainPrice">$98,245.50</div>
                <div class="price-change positive" id="dashMainChange">+2.45%</div>
            </div>

            <div class="pair-stats-grid">
                <div class="stat-box">
                    <div class="stat-box-label">24h High</div>
                    <div class="stat-box-value" id="dashStat24hHigh">$99,120</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">24h Low</div>
                    <div class="stat-box-value" id="dashStat24hLow">$96,800</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">24h Volume</div>
                    <div class="stat-box-value" id="dashStat24hVolume">28.5B</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Market Cap</div>
                    <div class="stat-box-value" id="dashStatMarketCap">$1.92T</div>
                </div>
            </div>
        </div>

        <!-- Quick Chart Preview -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üìà</span>
                    <span>Quick Chart Overview</span>
                </div>
                <button class="chart-btn active" onclick="showLayer('tradingLayer')">View Full Trading Page ‚Üí</button>
            </div>
            <div class="chart-wrapper small">
                <canvas id="dashPriceCanvas"></canvas>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 6: Trading Page -->
<div id="tradingLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>TRADING LIVE</span>
            </div>
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>‚ö° Professional Trading Terminal</h1>
            <p>Execute trades with advanced charts, real-time data, and AI-powered insights.</p>
        </div>

        <!-- Account Balance Widget -->
        <div class="account-balance-widget">
            <div class="account-type-selector">
                <button id="tradingDemoBtn" class="account-type-btn active" onclick="switchAccountType('demo')">
                    üéÆ Demo Account
                </button>
                <button id="tradingRealBtn" class="account-type-btn" onclick="switchAccountType('real')">
                    üí∞ Real Account
                </button>
            </div>
            <div class="balance-display">
                <div class="balance-label" id="tradingBalanceLabel">DEMO BALANCE</div>
                <div class="balance-amount" id="tradingBalanceAmount">$25.00</div>
            </div>
            <div class="balance-info">
                <div class="balance-info-item">
                    <div class="balance-info-label">Available</div>
                    <div class="balance-info-value" id="tradingAvailableBalance">$25.00</div>
                </div>
                <div class="balance-info-item">
                    <div class="balance-info-label">In Trades</div>
                    <div class="balance-info-value">$0.00</div>
                </div>
                <div class="balance-info-item">
                    <div class="balance-info-label">Profit/Loss</div>
                    <div class="balance-info-value" style="color: var(--accent-green);">$0.00</div>
                </div>
            </div>
        </div>

        <!-- Trading Pair Header -->
        <div class="pair-header">
            <div class="pair-selector">
                <div class="pair-icon" id="tradingPairIcon">‚Çø</div>
                <select class="pair-select" id="tradingSymbolSelect">
                    <option value="BTCUSDT">BTC/USDT</option>
                    <option value="ETHUSDT">ETH/USDT</option>
                    <option value="BNBUSDT">BNB/USDT</option>
                    <option value="SOLUSDT">SOL/USDT</option>
                    <option value="XRPUSDT">XRP/USDT</option>
                    <option value="ADAUSDT">ADA/USDT</option>
                </select>
            </div>
            
            <div class="price-display">
                <div class="main-price" id="tradingMainPrice">$98,245.50</div>
                <div class="price-change positive" id="tradingMainChange">+2.45%</div>
            </div>

            <div class="pair-stats-grid">
                <div class="stat-box">
                    <div class="stat-box-label">24h High</div>
                    <div class="stat-box-value" id="tradingStat24hHigh">$99,120</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">24h Low</div>
                    <div class="stat-box-value" id="tradingStat24hLow">$96,800</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">24h Volume</div>
                    <div class="stat-box-value" id="tradingStat24hVolume">28.5B</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Market Cap</div>
                    <div class="stat-box-value" id="tradingStatMarketCap">$1.92T</div>
                </div>
            </div>
        </div>

        <!-- Main Chart -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üìà</span>
                    <span>Advanced Trading Chart</span>
                </div>
                <div class="chart-controls">
                    <button class="chart-btn">1m</button>
                    <button class="chart-btn">5m</button>
                    <button class="chart-btn active">15m</button>
                    <button class="chart-btn">1h</button>
                    <button class="chart-btn">4h</button>
                    <button class="chart-btn">1D</button>
                </div>
            </div>
            <div class="chart-wrapper">
                <canvas id="tradingPriceCanvas"></canvas>
            </div>
        </div>

        <!-- Volume & RSI Charts -->
        <div class="grid-2">
            <div class="chart-section">
                <div class="chart-header">
                    <div class="chart-title">
                        <span>üìä</span>
                        <span>Volume Analysis</span>
                    </div>
                </div>
                <div class="chart-wrapper small">
                    <canvas id="tradingVolumeCanvas"></canvas>
                </div>
            </div>

            <div class="chart-section">
                <div class="chart-header">
                    <div class="chart-title">
                        <span>üìâ</span>
                        <span>RSI Indicator (14)</span>
                    </div>
                </div>
                <div class="chart-wrapper small">
                    <canvas id="tradingRsiCanvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Order Book & Recent Trades -->
        <div class="grid-2">
            <div class="orderbook-container">
                <div class="orderbook-title">Order Book</div>
                <div class="orderbook-headers">
                    <div>Price (USDT)</div>
                    <div>Amount</div>
                    <div>Total</div>
                </div>
                <div id="tradingAskOrdersContainer"></div>
                <div class="orderbook-spread">
                    Spread: <span class="spread-value" id="tradingSpreadValue">48.50</span> (<span id="tradingSpreadPercent">0.049%</span>)
                </div>
                <div id="tradingBidOrdersContainer"></div>
            </div>

            <div class="trades-container">
                <div class="orderbook-title">Recent Trades</div>
                <div class="orderbook-headers">
                    <div>Price (USDT)</div>
                    <div>Amount</div>
                    <div>Time</div>
                </div>
                <div id="tradingRecentTradesContainer"></div>
            </div>
        </div>

        <!-- Trading Actions -->
        <div class="action-buttons">
            <button class="action-btn btn-deposit" onclick="alert('Trade execution will be added in next version')">üü¢ BUY / LONG</button>
            <button class="action-btn btn-withdraw" onclick="alert('Trade execution will be added in next version')">üî¥ SELL / SHORT</button>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- Reviews Layer -->
<div id="reviewsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>‚≠ê User Reviews</h1>
            <p>See what our 50,000+ traders are saying</p>
        </div>

        <div style="background: var(--bg-secondary); border-radius: 12px; padding: 40px; text-align: center;">
            <h2 style="color: var(--accent-green); margin-bottom: 20px;">Reviews Coming Soon!</h2>
            <p style="color: var(--text-secondary);">We're collecting amazing testimonials from our users. Check back soon!</p>
            <button class="hero-btn hero-btn-primary" onclick="showLayer('signupLayer')" style="margin-top: 20px;">Join CryptoPro Today</button>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<script>
// ==================== GLOBAL STATE ====================
let currentUser = null;
let currentSymbol = 'BTCUSDT';
let currentLayer = 'welcomeLayer';
let accountType = 'demo';
let demoBalance = 25.00;
let realBalance = 0.00;

// ==================== LAYER MANAGEMENT ====================
function showLayer(layerId) {
    document.querySelectorAll('.layer').forEach(layer => {
        layer.classList.remove('active');
    });
    document.getElementById(layerId).classList.add('active');
    currentLayer = layerId;

    if (layerId === 'chartsLayer') initChartsPage();
    if (layerId === 'dashboardLayer') initDashboard();
    if (layerId === 'tradingLayer') initTradingPage();
    if (layerId === 'welcomeLayer') initWelcomePage();
}

// ==================== REFERRAL BANNER ====================
window.onload = function() {
    const urlParams = new URLSearchParams(window.location.search);
    const referralCode = urlParams.get('ref');
    if (referralCode) {
        document.getElementById('signupReferralCode').value = referralCode;
        const referrerNames = ['John', 'Sarah', 'Michael', 'David', 'James', 'Emma', 'Felix', 'Mary'];
        const randomName = referrerNames[Math.floor(Math.random() * referrerNames.length)];
        document.getElementById('referrerName').textContent = randomName;
        document.getElementById('referralSuccessBanner').classList.add('show');
    }
    initWelcomePage();
};

function closeReferralBanner() {
    document.getElementById('referralSuccessBanner').classList.remove('show');
}

// ==================== ACCOUNT TYPE MANAGEMENT ====================
function switchAccountType(type) {
    accountType = type;
    document.querySelectorAll('.account-type-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    if (type === 'demo') {
        document.getElementById('demoAccountBtn')?.classList.add('active');
        document.getElementById('tradingDemoBtn')?.classList.add('active');
        updateBalanceDisplay(demoBalance, 'DEMO BALANCE');
    } else {
        document.getElementById('realAccountBtn')?.classList.add('active');
        document.getElementById('tradingRealBtn')?.classList.add('active');
        updateBalanceDisplay(realBalance, 'REAL BALANCE');
    }
}

function updateBalanceDisplay(balance, label) {
    const elements = {
        'balanceAmount': balance,
        'balanceLabel': label,
        'tradingBalanceAmount': balance,
        'tradingBalanceLabel': label,
        'tradingAvailableBalance': balance,
        'dashAvailableBalance': balance
    };
    for (const [id, value] of Object.entries(elements)) {
        const el = document.getElementById(id);
        if (el) {
            if (id.includes('Label')) {
                el.textContent = value;
            } else {
                el.textContent = '$' + (typeof value === 'number' ? value.toFixed(2) : value);
            }
        }
    }
}

// ==================== WELCOME PAGE INITIALIZATION ====================
function initWelcomePage() {
    generateLiveTraders();
    generateTopWinners();
    setInterval(generateLiveTraders, 5000);
}

function generateLiveTraders() {
    const names = ['Felix K.', 'Sarah M.', 'John D.', 'Mary W.', 'David O.', 'Emma N.', 'James K.', 'Fatima A.', 'Michael O.', 'Amina B.'];
    const countries = ['üá∞üá™ Kenya', 'üá≥üá¨ Nigeria', 'üáøüá¶ South Africa', 'üá™üá¨ Egypt', 'üá¨üá≠ Ghana', 'üáπüáø Tanzania'];
    const emojis = ['üë®', 'üë©', 'üßë', 'üë®‚Äçüíº', 'üë©‚Äçüíº'];
    let html = '';
    for (let i = 0; i < 20; i++) {
        const name = names[Math.floor(Math.random() * names.length)];
        const country = countries[Math.floor(Math.random() * countries.length)];
        const emoji = emojis[Math.floor(Math.random() * emojis.length)];
        const profit = (Math.random() * 500 + 50).toFixed(2);
        html += `
            <div class="trader-card">
                <div class="trader-avatar">${emoji}</div>
                <div class="trader-info">
                    <div class="trader-name">${name} ‚Ä¢ ${country}</div>
                    <div class="trader-profit">+$${profit}</div>
                </div>
            </div>
        `;
    }
    document.getElementById('liveTradersTicker').innerHTML = html + html;
}

function generateTopWinners() {
    const winners = [
        { rank: 1, name: 'Felix K.', location: 'Nairobi, Kenya', emoji: 'üë®', profit: '$12,450', trades: '1,234' },
        { rank: 2, name: 'Sarah M.', location: 'Lagos, Nigeria', emoji: 'üë©', profit: '$9,820', trades: '987' },
        { rank: 3, name: 'Michael O.', location: 'Johannesburg, SA', emoji: 'üë®', profit: '$8,650', trades: '856' },
        { rank: 4, name: 'Amina B.', location: 'Cairo, Egypt', emoji: 'üë©', profit: '$7,340', trades: '734' },
        { rank: 5, name: 'David N.', location: 'Accra, Ghana', emoji: 'üë®', profit: '$6,890', trades: '689' },
        { rank: 6, name: 'Emma W.', location: 'Kigali, Rwanda', emoji: 'üë©', profit: '$5,720', trades: '572' }
    ];
    let html = '';
    winners.forEach(winner => {
        html += `
            <div class="winner-card">
                <div class="winner-rank">${winner.rank}</div>
                <div class="winner-header">
                    <div class="winner-avatar-large">${winner.emoji}</div>
                    <div class="winner-details">
                        <h4>${winner.name}</h4>
                        <div class="winner-location">${winner.location}</div>
                    </div>
                </div>
                <div class="winner-stats">
                    <div class="winner-stat">
                        <div class="winner-stat-label">Total Profit</div>
                        <div class="winner-stat-value">${winner.profit}</div>
                    </div>
                    <div class="winner-stat">
                        <div class="winner-stat-label">Trades</div>
                        <div class="winner-stat-value">${winner.trades}</div>
                    </div>
                </div>
            </div>
        `;
    });
    document.getElementById('topWinnersGrid').innerHTML = html;
}

// ==================== CHART GENERATION ====================
function generateMockChart(canvasId, type = 'price') {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const points = 50;
    const data = [];
    let baseValue = type === 'price' ? 98000 : (type === 'volume' ? 1000000 : 50);
    for (let i = 0; i < points; i++) {
        const change = (Math.random() - 0.5) * (type === 'price' ? 2000 : (type === 'volume' ? 200000 : 10));
        baseValue += change;
        data.push(baseValue);
    }
    const max = Math.max(...data);
    const min = Math.min(...data);
    const range = max - min;

    ctx.beginPath();
    ctx.strokeStyle = type === 'volume' ? 'rgba(0, 217, 255, 0.8)' : 'rgba(14, 203, 129, 0.8)';
    ctx.lineWidth = 2;
    data.forEach((value, index) => {
        const x = (index / (points - 1)) * canvas.width;
        const y = canvas.height - ((value - min) / range) * canvas.height * 0.8 - canvas.height * 0.1;
        if (index === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
    });
    ctx.stroke();

    ctx.lineTo(canvas.width, canvas.height);
    ctx.lineTo(0, canvas.height);
    ctx.closePath();
    ctx.fillStyle = type === 'volume' ? 'rgba(0, 217, 255, 0.1)' : 'rgba(14, 203, 129, 0.1)';
    ctx.fill();
}

function initChartsPage() {
    updatePriceData('charts');
    generateMockChart('chartsPriceCanvas', 'price');
    generateMockChart('chartsVolumeCanvas', 'volume');
    generateMockChart('chartsRsiCanvas', 'rsi');
    generateOrderBook('charts');
    generateRecentTrades('charts');
    setInterval(() => {
        updatePriceData('charts');
        generateMockChart('chartsPriceCanvas', 'price');
        generateOrderBook('charts');
        generateRecentTrades('charts');
    }, 3000);
}

function initDashboard() {
    if (currentUser) {
        document.getElementById('userName').textContent = currentUser.name;
        document.getElementById('userEmail').textContent = currentUser.email;
    }
    updatePriceData('dash');
    generateMockChart('dashPriceCanvas', 'price');
    setInterval(() => {
        updatePriceData('dash');
        generateMockChart('dashPriceCanvas', 'price');
    }, 3000);
}

function initTradingPage() {
    updatePriceData('trading');
    generateMockChart('tradingPriceCanvas', 'price');
    generateMockChart('tradingVolumeCanvas', 'volume');
    generateMockChart('tradingRsiCanvas', 'rsi');
    generateOrderBook('trading');
    generateRecentTrades('trading');
    setInterval(() => {
        updatePriceData('trading');
        generateMockChart('tradingPriceCanvas', 'price');
        generateOrderBook('trading');
        generateRecentTrades('trading');
    }, 3000);
}

function updatePriceData(prefix) {
    const basePrice = 98000 + (Math.random() - 0.5) * 1000;
    const change = ((Math.random() - 0.4) * 5).toFixed(2);
    const mainPrice = document.getElementById(`${prefix}MainPrice`);
    const mainChange = document.getElementById(`${prefix}MainChange`);
    if (mainPrice) mainPrice.textContent = `$${basePrice.toFixed(2)}`;
    if (mainChange) {
        mainChange.textContent = `${change >= 0 ? '+' : ''}${change}%`;
        mainChange.className = `price-change ${change >= 0 ? 'positive' : 'negative'}`;
    }
}

function generateOrderBook(prefix) {
    const basePrice = 98000;
    let asksHtml = '';
    let bidsHtml = '';
    for (let i = 0; i < 10; i++) {
        const askPrice = (basePrice + i * 10 + Math.random() * 10).toFixed(2);
        const bidPrice = (basePrice - i * 10 - Math.random() * 10).toFixed(2);
        const amount = (Math.random() * 0.5 + 0.1).toFixed(4);
        const total = (askPrice * amount).toFixed(2);
        asksHtml += `<div class="orderbook-row"><div class="price-ask">${askPrice}</div><div>${amount}</div><div>${total}</div></div>`;
        bidsHtml += `<div class="orderbook-row"><div class="price-bid">${bidPrice}</div><div>${amount}</div><div>${total}</div></div>`;
    }
    const askContainer = document.getElementById(`${prefix}AskOrdersContainer`);
    const bidContainer = document.getElementById(`${prefix}BidOrdersContainer`);
    if (askContainer) askContainer.innerHTML = asksHtml;
    if (bidContainer) bidContainer.innerHTML = bidsHtml;
}

function generateRecentTrades(prefix) {
    let html = '';
    const basePrice = 98000;
    for (let i = 0; i < 15; i++) {
        const price = (basePrice + (Math.random() - 0.5) * 100).toFixed(2);
        const amount = (Math.random() * 0.5 + 0.05).toFixed(4);
        const time = new Date(Date.now() - i * 3000).toLocaleTimeString();
        const isBuy = Math.random() > 0.5;
        html += `<div class="trade-row"><div class="${isBuy ? 'price-bid' : 'price-ask'}">${price}</div><div>${amount}</div><div style="color: var(--text-secondary); font-size: 11px;">${time}</div></div>`;
    }
    const container = document.getElementById(`${prefix}RecentTradesContainer`);
    if (container) container.innerHTML = html;
}

// ==================== AUTH FUNCTIONS ====================
function handleSignup(e) {
    e.preventDefault();
    const name = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    const phone = document.getElementById('signupPhone').value;
    const password = document.getElementById('signupPassword').value;
    const confirm = document.getElementById('signupConfirm').value;
    const referralCode = document.getElementById('signupReferralCode').value;

    if (password !== confirm) {
        showAlert('signupAlert', '‚ùå Passwords do not match!', 'error');
        return;
    }

    const userCode = 'CRP' + Math.random().toString(36).substr(2, 6).toUpperCase();
    currentUser = {
        name, email, phone, referralCode: userCode,
        balance: 25, deposited: 0, profit: 0,
        referrals: [], referralEarnings: 0
    };
    localStorage.setItem('cryptoproUser', JSON.stringify(currentUser));
    showAlert('signupAlert', '‚úÖ Account created successfully! Redirecting...', 'success');
    setTimeout(() => showLayer('dashboardLayer'), 2000);
}

function handleLogin(e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    if (!email || !password) {
        showAlert('loginAlert', '‚ùå Please enter email and password!', 'error');
        return;
    }
    
    const stored = localStorage.getItem('cryptoproUser');
    if (stored) {
        currentUser = JSON.parse(stored);
        if (currentUser.email === email) {
            showAlert('loginAlert', '‚úÖ Login successful! Redirecting...', 'success');
            demoBalance = currentUser.balance || 25;
            realBalance = currentUser.deposited || 0;
            setTimeout(() => {
                showLayer('dashboardLayer');
                initDashboard();
            }, 1500);
        } else {
            showAlert('loginAlert', '‚ùå Email does not match! Please check your credentials.', 'error');
        }
    } else {
        showAlert('loginAlert', '‚ùå No account found! Please sign up first.', 'error');
    }
}

function handleLogout() {
    currentUser = null;
    showLayer('welcomeLayer');
}

function showAlert(elementId, message, type) {
    const alert = document.getElementById(elementId);
    alert.textContent = message;
    alert.className = `alert alert-${type} show`;
    setTimeout(() => alert.classList.remove('show'), 5000);
}
<!-- LAYER 7: Deposit Page -->
<div id="depositLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üí∞ Deposit Funds</h1>
            <p>Fund your account instantly with multiple payment methods. All deposits are credited within 1-10 minutes.</p>
        </div>

        <div class="chart-section">
            <div style="background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
                <div style="font-size: 24px; font-weight: 900; color: #fbbf24; margin-bottom: 8px;">üéâ 100% WELCOME BONUS!</div>
                <div style="font-size: 16px; color: var(--text-primary);">First deposit gets 100% match! Deposit $100, get $200 to trade!</div>
            </div>

            <form onsubmit="processDeposit(event)">
                <div class="form-group">
                    <label>Deposit Amount (USD)</label>
                    <input type="number" id="depositAmount" min="10" placeholder="Minimum $10" required>
                </div>
                
                <div class="form-group">
                    <label>Select Payment Method</label>
                    <div class="payment-method-selector">
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('mpesa')">üì± M-Pesa</button>
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('crypto')">ü™ô Crypto</button>
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('bank')">üè¶ Bank</button>
                    </div>
                </div>

                <div id="mpesaDetails" class="payment-address" style="display: none;">
                    <div style="font-size: 14px; margin-bottom: 8px; color: var(--accent-green);">üì± M-PESA TILL NUMBER</div>
                    <div class="payment-address-text">7500448</div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('7500448', 'M-Pesa Till Number')">üìã Copy Till Number</button>
                </div>

                <div id="cryptoDetails" class="payment-address" style="display: none;">
                    <div style="font-size: 14px; margin-bottom: 8px; color: var(--accent-green);">ü™ô BINANCE USDT (TRC-20)</div>
                    <div class="payment-address-text">TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc</div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc', 'Crypto Address')">üìã Copy Address</button>
                </div>

                <div id="bankDetails" class="payment-address" style="display: none;">
                    <div style="font-size: 14px; margin-bottom: 12px; color: var(--accent-green);">üè¶ BANK TRANSFER DETAILS</div>
                    <div style="text-align: left; background: rgba(0,0,0,0.3); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <div style="margin-bottom: 8px;"><strong>Bank:</strong> Equity Bank</div>
                        <div style="margin-bottom: 8px;"><strong>Account Name:</strong> Felix Kiprotich Koskei</div>
                        <div style="margin-bottom: 8px;"><strong>Account Number:</strong> <span style="color: var(--accent-green);">0310184912409</span></div>
                        <div><strong>Branch:</strong> Any Equity Bank Branch</div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('0310184912409', 'Account Number')">üìã Copy Account Number</button>
                </div>

                <div style="background: rgba(246, 70, 93, 0.1); border: 2px solid rgba(246, 70, 93, 0.3); border-radius: 12px; padding: 16px; margin: 16px 0;">
                    <strong style="color: var(--accent-red); display: block; margin-bottom: 8px;">‚ö†Ô∏è IMPORTANT SECURITY NOTICE:</strong>
                    <div style="font-size: 13px; line-height: 1.6; color: var(--text-secondary);">
                        ‚Ä¢ Complete your payment FIRST before submitting<br>
                        ‚Ä¢ Upload payment screenshot for instant verification<br>
                        ‚Ä¢ Funds credited after admin verification (1-10 minutes)<br>
                        ‚Ä¢ Contact support if verification takes longer
                    </div>
                </div>

                <div class="form-group">
                    <label>Payment Proof (Upload Screenshot)</label>
                    <textarea id="depositProof" rows="3" placeholder="Paste screenshot or transaction ID here..." required></textarea>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        üì∏ Required: Screenshot of payment confirmation for verification
                    </div>
                </div>

                <button type="submit" class="btn-submit">‚úÖ SUBMIT DEPOSIT FOR VERIFICATION</button>
            </form>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 8: Withdraw Page -->
<div id="withdrawLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üí∏ Withdraw Funds</h1>
            <p>Fast and secure withdrawals. Processing time: 1-24 hours.</p>
        </div>

        <div class="chart-section">
            <div style="background: rgba(14, 203, 129, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 20px;">
                <div style="text-align: center;">
                    <div style="font-size: 14px; color: var(--text-secondary);">Available for Withdrawal</div>
                    <div style="font-size: 32px; font-weight: 700; color: var(--accent-green);" id="withdrawAvailableBalance">$0.00</div>
                </div>
            </div>

            <form onsubmit="processWithdraw(event)">
                <div class="form-group">
                    <label>Withdrawal Amount (USD)</label>
                    <input type="number" id="withdrawAmount" min="10" placeholder="Minimum $10" required>
                </div>
                <div class="form-group">
                    <label>Withdrawal Method</label>
                    <select id="withdrawMethod">
                        <option>üè¶ Bank Transfer</option>
                        <option>ü™ô Crypto (USDT)</option>
                        <option>üì± M-Pesa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Account Details</label>
                    <input type="text" id="withdrawAccount" placeholder="Enter your account number/address/phone" required>
                </div>
                <button type="submit" class="btn-submit">üí∏ REQUEST WITHDRAWAL</button>
            </form>

            <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 20px; margin-top: 20px;">
                <h3 style="color: var(--accent-green); margin-bottom: 12px;">‚úÖ Withdrawal Information</h3>
                <ul style="list-style: none; padding: 0; line-height: 2;">
                    <li>‚úì Minimum withdrawal: $10</li>
                    <li>‚úì Processing time: 1-24 hours</li>
                    <li>‚úì No hidden fees</li>
                    <li>‚úì 24/7 support available</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 9: Portfolio Page -->
<div id="portfolioLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üìä Portfolio Overview</h1>
            <p>Track your trading performance and earnings.</p>
        </div>

        <!-- Portfolio Stats -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="portfolioDeposited">$0</div>
                    <div class="stat-label">Total Deposited</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="portfolioBalance">$25</div>
                    <div class="stat-label">Current Balance</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value" id="portfolioProfit">$0</div>
                    <div class="stat-label">Total Profit</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="portfolioTrades">0</div>
                    <div class="stat-label">Total Trades</div>
                </div>
            </div>
        </div>

        <!-- Performance Chart -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">üìà Performance Overview</h3>
            <div class="chart-wrapper">
                <canvas id="portfolioChart"></canvas>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 10: Referrals Page -->
<div id="referralLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üéÅ Referral Program</h1>
            <p>Earn $25 for every friend you refer. Unlimited earning potential!</p>
        </div>

        <!-- Referral Stats -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value" id="totalReferrals">0</div>
                    <div class="stat-label">Total Referrals</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üíµ</div>
                    <div class="stat-value" id="referralEarnings">$0</div>
                    <div class="stat-label">Referral Earnings</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="withdrawableBonus">$0</div>
                    <div class="stat-label">Withdrawable</div>
                </div>
            </div>
        </div>

        <!-- Share Referral Box -->
        <div class="share-referral-box">
            <h3>üöÄ Share Your Referral Link</h3>
            <p>Invite friends to join CryptoPro and earn <strong>$25 instant bonus</strong> for every successful signup!</p>
            <div class="referral-link-box" id="userReferralLink">
                https://cryptopro.com/ref/YOUR_CODE
            </div>
            <div class="share-buttons">
                <button class="share-btn share-btn-copy" onclick="copyReferralLink()">üìã Copy Link</button>
                <button class="share-btn share-btn-whatsapp" onclick="shareViaWhatsApp()">üí¨ Share on WhatsApp</button>
            </div>
        </div>

        <!-- Referral List -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">Your Referrals</h3>
            <div id="referralList">
                <div style="text-align: center; padding: 40px; opacity: 0.5;">
                    No referrals yet. Start sharing to earn!
                </div>
            </div>
        </div>

        <!-- How it Works -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">üí° How It Works</h3>
            <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px;">
                <div style="margin-bottom: 16px;">
                    <strong style="color: var(--accent-green);">Step 1:</strong> Copy your unique referral link
                </div>
                <div style="margin-bottom: 16px;">
                    <strong style="color: var(--accent-green);">Step 2:</strong> Share it with friends on WhatsApp, Facebook, Twitter
                </div>
                <div style="margin-bottom: 16px;">
                    <strong style="color: var(--accent-green);">Step 3:</strong> When they sign up and verify, you both get $25!
                </div>
                <div>
                    <strong style="color: var(--accent-green);">Step 4:</strong> Withdraw your earnings anytime
                </div>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 11: AI Trading Bots -->
<div id="botsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>ü§ñ AI Trading Bots</h1>
            <p>Select an AI bot and let it trade automatically 24/7. No manual trading required!</p>
        </div>

        <!-- Bot Status Display -->
        <div class="account-balance-widget" id="botStatusWidget" style="display: none;">
            <div style="text-align: center; padding: 20px;">
                <div style="font-size: 48px; margin-bottom: 12px;">ü§ñ</div>
                <h3 style="color: var(--accent-green); margin-bottom: 8px;" id="activeBotName">Conservative Bot</h3>
                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">STATUS: <span style="color: var(--accent-green); font-weight: 700;">ACTIVE</span></div>
                <div class="balance-info">
                    <div class="balance-info-item">
                        <div class="balance-info-label">Total Trades</div>
                        <div class="balance-info-value" id="botTotalTrades">0</div>
                    </div>
                    <div class="balance-info-item">
                        <div class="balance-info-label">Win Rate</div>
                        <div class="balance-info-value" style="color: var(--accent-green);" id="botWinRate">0%</div>
                    </div>
                    <div class="balance-info-item">
                        <div class="balance-info-label">Total Profit</div>
                        <div class="balance-info-value" style="color: var(--accent-green);" id="botTotalProfit">$0.00</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bot Selection Grid -->
        <div class="stats-section">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">Choose Your Trading Bot</h3>
            <div class="stats-grid">
                <div class="stat-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectBot('conservative')">
                    <div class="stat-icon">üõ°Ô∏è</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Conservative Bot</div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">Low-risk strategy with steady returns</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px;">
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Win Rate</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">65%</div>
                        </div>
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Profit/Trade</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">$3-$15</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectBot('balanced')">
                    <div class="stat-icon">‚öñÔ∏è</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Balanced Bot</div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">Moderate risk with balanced returns</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px;">
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Win Rate</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">75%</div>
                        </div>
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Profit/Trade</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">$10-$35</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectBot('aggressive')">
                    <div class="stat-icon">üöÄ</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Aggressive Bot</div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">High-risk, high-reward strategy</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px;">
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Win Rate</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">85%</div>
                        </div>
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Profit/Trade</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">$20-$80</div>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectBot('expert')">
                    <div class="stat-icon">ü§ñ</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Expert AI Bot</div>
                    <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">Advanced AI with maximum profits</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px;">
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Win Rate</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">90%</div>
                        </div>
                        <div style="background: rgba(14, 203, 129, 0.1); padding: 8px; border-radius: 6px;">
                            <div style="font-size: 10px; color: var(--text-secondary);">Profit/Trade</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">$30-$120</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bot Control -->
        <div style="text-align: center; padding: 20px;">
            <button id="toggleBotBtn" class="btn-submit" onclick="toggleBot()" style="font-size: 18px; padding: 16px 40px; max-width: 400px;">
                üöÄ START BOT TRADING
            </button>
        </div>

        <!-- Live Bot Trades -->
        <div class="chart-section" id="botTradesSection" style="display: none;">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">üî¥ LIVE Bot Trades</h3>
            <div style="background: rgba(14, 203, 129, 0.05); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
                <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; font-size: 11px; color: var(--text-secondary); font-weight: 600; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">
                    <div>TIME</div>
                    <div>PAIR</div>
                    <div>TYPE</div>
                    <div>ENTRY</div>
                    <div>EXIT</div>
                    <div>PROFIT</div>
                    <div>STATUS</div>
                </div>
                <div id="botTradesContainer" style="max-height: 400px; overflow-y: auto;"></div>
            </div>
        </div>

        <div style="margin-top: 40px; text-align: center; opacity: 0.7;">
            <p style="font-size: 14px; color: var(--text-secondary);">üí° Bot trades are executed automatically based on AI analysis</p>
            <p style="font-size: 14px; color: var(--text-secondary);">üìä All trades appear in your trading history</p>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 12: Trading History -->
<div id="historyLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üìä Trading History</h1>
            <p>View all your trades, profits, and performance analytics</p>
        </div>

        <!-- Trading Stats Summary -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="historyTotalTrades">0</div>
                    <div class="stat-label">Total Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" style="color: var(--accent-green);" id="historyWinningTrades">0</div>
                    <div class="stat-label">Winning Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-value" style="color: var(--accent-red);" id="historyLosingTrades">0</div>
                    <div class="stat-label">Losing Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value" style="color: var(--accent-green);" id="historyWinRate">0%</div>
                    <div class="stat-label">Win Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" style="color: var(--accent-green);" id="historyTotalProfit">$0.00</div>
                    <div class="stat-label">Total Profit</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="historyAvgProfit">$0.00</div>
                    <div class="stat-label">Avg Profit/Trade</div>
                </div>
            </div>
        </div>

        <!-- Filter Options -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üîç</span>
                    <span>Filter Trades</span>
                </div>
                <div class="chart-controls">
                    <button class="chart-btn active" onclick="filterTrades('all')">All</button>
                    <button class="chart-btn" onclick="filterTrades('winning')">Winning</button>
                    <button class="chart-btn" onclick="filterTrades('losing')">Losing</button>
                    <button class="chart-btn" onclick="filterTrades('today')">Today</button>
                    <button class="chart-btn" onclick="filterTrades('week')">This Week</button>
                </div>
            </div>
        </div>

        <!-- Trading History Table -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">Complete Trading History</h3>
            <div style="background: rgba(14, 203, 129, 0.05); border-radius: 8px; padding: 16px;">
                <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; font-size: 11px; color: var(--text-secondary); font-weight: 600; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">
                    <div>DATE/TIME</div>
                    <div>PAIR</div>
                    <div>TYPE</div>
                    <div>AMOUNT</div>
                    <div>ENTRY</div>
                    <div>EXIT</div>
                    <div>PROFIT/LOSS</div>
                    <div>STATUS</div>
                </div>
                <div id="tradingHistoryContainer" style="max-height: 500px; overflow-y: auto;">
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 16px;">üìä</div>
                        <div style="font-size: 16px;">No trading history yet</div>
                        <div style="font-size: 14px; margin-top: 8px;">Start trading to see your history here</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<style>
/* Payment Method Styles */
.payment-method-selector {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 12px;
    margin-bottom: 20px;
}

.payment-method-btn {
    padding: 16px;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    font-weight: 600;
}

.payment-method-btn:hover {
    border-color: var(--accent-green);
    background: rgba(14, 203, 129, 0.1);
}

.payment-method-btn.active {
    border-color: var(--accent-green);
    background: rgba(14, 203, 129, 0.2);
}

.payment-address {
    background: rgba(14, 203, 129, 0.1);
    border: 2px solid rgba(14, 203, 129, 0.3);
    border-radius: 12px;
    padding: 16px;
    margin: 16px 0;
    text-align: center;
}

.payment-address-text {
    font-size: 16px;
    font-weight: 700;
    color: var(--accent-green);
    word-break: break-all;
    font-family: 'Monaco', 'Courier New', monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
}

.copy-btn {
    background: linear-gradient(135deg, var(--accent-blue), #0099cc);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    margin-top: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.copy-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 217, 255, 0.4);
}
</style>

<script>
// ==================== ADDITIONAL GLOBAL VARIABLES ====================
let selectedPaymentMethod = null;
let tradingHistory = [];
let currentFilter = 'all';

// ==================== BOT TRADING SYSTEM ====================
const BOTS = {
    conservative: {
        name: 'Conservative Bot',
        icon: 'üõ°Ô∏è',
        desc: 'Low-risk strategy with steady returns',
        winRate: 0.65,
        minProfit: 3,
        maxProfit: 15,
        interval: 20000 // 20 seconds
    },
    balanced: {
        name: 'Balanced Bot',
        icon: '‚öñÔ∏è',
        desc: 'Moderate risk with balanced returns',
        winRate: 0.75,
        minProfit: 10,
        maxProfit: 35,
        interval: 18000 // 18 seconds
    },
    aggressive: {
        name: 'Aggressive Bot',
        icon: 'üöÄ',
        desc: 'High-risk, high-reward strategy',
        winRate: 0.85,
        minProfit: 20,
        maxProfit: 80,
        interval: 15000 // 15 seconds
    },
    expert: {
        name: 'Expert AI Bot',
        icon: 'ü§ñ',
        desc: 'Advanced AI with maximum profits',
        winRate: 0.90,
        minProfit: 30,
        maxProfit: 120,
        interval: 12000 // 12 seconds
    }
};

const TRADING_PAIRS_BOTS = ['BTC/USDT', 'ETH/USDT', 'BNB/USDT', 'SOL/USDT', 'XRP/USDT', 'ADA/USDT', 'DOGE/USDT', 'MATIC/USDT', 'LINK/USDT', 'AVAX/USDT', 'DOT/USDT', 'LTC/USDT', 'UNI/USDT'];

let selectedBot = null;
let botRunning = false;
let botInterval = null;
let allTrades = [];
let totalProfit = 0;
let totalWins = 0;
let totalTrades = 0;

// ==================== PAYMENT METHODS ====================
function selectPaymentMethod(method) {
    selectedPaymentMethod = method;
    document.querySelectorAll('.payment-method-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    document.getElementById('mpesaDetails').style.display = 'none';
    document.getElementById('cryptoDetails').style.display = 'none';
    document.getElementById('bankDetails').style.display = 'none';
    
    if (method === 'mpesa') document.getElementById('mpesaDetails').style.display = 'block';
    if (method === 'crypto') document.getElementById('cryptoDetails').style.display = 'block';
    if (method === 'bank') document.getElementById('bankDetails').style.display = 'block';
}

function copyToClipboard(text, label) {
    navigator.clipboard.writeText(text).then(() => {
        alert(`‚úÖ ${label} copied to clipboard!\n\n${text}`);
    }).catch(() => {
        // Fallback for older browsers
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert(`‚úÖ ${label} copied to clipboard!\n\n${text}`);
    });
}

// ==================== DEPOSIT & WITHDRAW ====================
function processDeposit(e) {
    e.preventDefault();
    const amount = document.getElementById('depositAmount').value;
    const proof = document.getElementById('depositProof').value;
    
    if (!selectedPaymentMethod) {
        alert('‚ùå Please select a payment method!');
        return;
    }
    
    if (!proof) {
        alert('‚ùå Please provide payment proof!');
        return;
    }
    
    alert(`‚úÖ Deposit request submitted!\n\nAmount: $${amount}\nMethod: ${selectedPaymentMethod}\n\nYour deposit will be verified and credited within 1-10 minutes.\n\nContact support via WhatsApp if you need assistance.`);
    
    // Reset form
    document.getElementById('depositAmount').value = '';
    document.getElementById('depositProof').value = '';
    selectedPaymentMethod = null;
    document.querySelectorAll('.payment-method-btn').forEach(btn => btn.classList.remove('active'));
    
    setTimeout(() => showLayer('dashboardLayer'), 2000);
}

function processWithdraw(e) {
    e.preventDefault();
    const amount = document.getElementById('withdrawAmount').value;
    const method = document.getElementById('withdrawMethod').value;
    const account = document.getElementById('withdrawAccount').value;
    
    if (realBalance < parseFloat(amount)) {
        alert('‚ùå Insufficient balance for withdrawal!');
        return;
    }
    
    alert(`‚úÖ Withdrawal request submitted!\n\nAmount: $${amount}\nMethod: ${method}\nAccount: ${account}\n\nProcessing time: 1-24 hours\n\nYou will receive a confirmation once processed.`);
    
    // Reset form
    document.getElementById('withdrawAmount').value = '';
    document.getElementById('withdrawAccount').value = '';
    
    setTimeout(() => showLayer('dashboardLayer'), 2000);
}

// ==================== REFERRAL FUNCTIONS ====================
function copyReferralLink() {
    const link = document.getElementById('userReferralLink').textContent;
    copyToClipboard(link, 'Referral Link');
}

function shareViaWhatsApp() {
    const link = document.getElementById('userReferralLink').textContent;
    const message = `üöÄ Join me on CryptoPro and get $25 FREE bonus!\n\nI'm making consistent daily profits with AI-powered crypto trading bots.\n\n‚úÖ $25 instant signup bonus\n‚úÖ 100% withdrawable after verification\n‚úÖ AI bots trade 24/7 automatically\n‚úÖ Real profits, real withdrawals\n\nSign up now: ${link}\n\nDon't miss this opportunity! üí∞`;
    
    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
}

// ==================== BOT FUNCTIONS ====================
function selectBot(botKey) {
    if (botRunning) {
        alert('‚ö†Ô∏è Stop the current bot first before selecting a new one!');
        return;
    }
    selectedBot = botKey;
    const bot = BOTS[botKey];
    
    // Update UI to show selection
    document.querySelectorAll('.stat-card').forEach(card => {
        card.style.border = '1px solid var(--border-color)';
    });
    event.target.closest('.stat-card').style.border = '2px solid var(--accent-green)';
    
    alert(`‚úÖ Selected: ${bot.name}\n\n${bot.desc}\n\nWin Rate: ${(bot.winRate * 100).toFixed(0)}%\nProfit Range: $${bot.minProfit}-$${bot.maxProfit}\n\nClick "START BOT TRADING" to begin!`);
}

function toggleBot() {
    if (!selectedBot) {
        alert('‚ùå Please select a bot first!');
        return;
    }
    
    if (botRunning) {
        stopBot();
    } else {
        startBot();
    }
}

function startBot() {
    const bot = BOTS[selectedBot];
    botRunning = true;
    
    // Update UI
    document.getElementById('toggleBotBtn').textContent = '‚è∏Ô∏è STOP BOT TRADING';
    document.getElementById('toggleBotBtn').style.background = 'linear-gradient(135deg, var(--accent-red), #cc0055)';
    document.getElementById('botStatusWidget').style.display = 'block';
    document.getElementById('botTradesSection').style.display = 'block';
    document.getElementById('activeBotName').textContent = bot.name;
    
    // Start trading
    executeBotTrade();
    botInterval = setInterval(executeBotTrade, bot.interval);
    
    alert(`üöÄ ${bot.name} activated!\n\nThe bot is now trading automatically.\nYou can see live trades below.`);
}

function stopBot() {
    botRunning = false;
    clearInterval(botInterval);
    
    // Update UI
    document.getElementById('toggleBotBtn').textContent = 'üöÄ START BOT TRADING';
    document.getElementById('toggleBotBtn').style.background = 'linear-gradient(135deg, var(--accent-green), #0B8F5F)';
    
    const winRate = totalTrades > 0 ? ((totalWins / totalTrades) * 100).toFixed(1) : 0;
    
    alert(`‚è∏Ô∏è Bot stopped!\n\nTrading Summary:\n‚Ä¢ Total Trades: ${totalTrades}\n‚Ä¢ Winning Trades: ${totalWins}\n‚Ä¢ Win Rate: ${winRate}%\n‚Ä¢ Total Profit: $${totalProfit.toFixed(2)}`);
}

function executeBotTrade() {
    if (!botRunning) return;
    
    const bot = BOTS[selectedBot];
    const pair = TRADING_PAIRS_BOTS[Math.floor(Math.random() * TRADING_PAIRS_BOTS.length)];
    const isWin = Math.random() < bot.winRate;
    const amount = Math.random() * 50 + 50;
    const entry = Math.random() * 10000 + 20000;
    
    let profit;
    if (isWin) {
        profit = Math.random() * (bot.maxProfit - bot.minProfit) + bot.minProfit;
    } else {
        profit = -(Math.random() * 15 + 5);
    }
    
    const exit = entry + (profit / amount * entry);
    
    const trade = {
        time: new Date().toLocaleString(),
        bot: bot.name,
        pair,
        type: Math.random() > 0.5 ? 'BUY' : 'SELL',
        amount: amount.toFixed(2),
        entry: entry.toFixed(2),
        exit: exit.toFixed(2),
        profit: profit.toFixed(2),
        status: isWin ? 'WON' : 'LOST'
    };
    
    allTrades.unshift(trade);
    tradingHistory.unshift(trade);
    if (allTrades.length > 50) allTrades.pop();
    
    totalTrades++;
    totalProfit += profit;
    if (isWin) totalWins++;
    
    // Update balance
    if (accountType === 'demo') {
        demoBalance += profit;
    } else {
        realBalance += profit;
    }
    updateBalanceDisplay(accountType === 'demo' ? demoBalance : realBalance, accountType === 'demo' ? 'DEMO BALANCE' : 'REAL BALANCE');
    
    // Update bot stats
    updateBotStats();
    
    // Update UI
    renderBotTrades();
    updateTradingHistory();
    
    console.log(`ü§ñ Bot Trade: ${pair} | ${isWin ? '‚úÖ WIN' : '‚ùå LOSS'} | Profit: $${profit.toFixed(2)}`);
}

function updateBotStats() {
    const winRate = totalTrades > 0 ? ((totalWins / totalTrades) * 100).toFixed(1) : 0;
    
    document.getElementById('botTotalTrades').textContent = totalTrades;
    document.getElementById('botWinRate').textContent = winRate + '%';
    document.getElementById('botTotalProfit').textContent = '$' + totalProfit.toFixed(2);
    
    // Update history stats
    document.getElementById('historyTotalTrades').textContent = totalTrades;
    document.getElementById('historyWinningTrades').textContent = totalWins;
    document.getElementById('historyLosingTrades').textContent = totalTrades - totalWins;
    document.getElementById('historyWinRate').textContent = winRate + '%';
    document.getElementById('historyTotalProfit').textContent = '$' + totalProfit.toFixed(2);
    const avgProfit = totalTrades > 0 ? (totalProfit / totalTrades).toFixed(2) : '0.00';
    document.getElementById('historyAvgProfit').textContent = '$' + avgProfit;
    
    // Update portfolio stats
    document.getElementById('portfolioBalance').textContent = '$' + (accountType === 'demo' ? demoBalance : realBalance).toFixed(2);
    document.getElementById('portfolioProfit').textContent = '$' + totalProfit.toFixed(2);
    document.getElementById('portfolioTrades').textContent = totalTrades;
}

function renderBotTrades() {
    const container = document.getElementById('botTradesContainer');
    if (!container) return;
    
    let html = '';
    allTrades.slice(0, 20).forEach(trade => {
        const profitColor = parseFloat(trade.profit) >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
        const statusColor = trade.status === 'WON' ? 'var(--accent-green)' : 'var(--accent-red)';
        
        html += `
            <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; padding: 12px 0; border-bottom: 1px solid rgba(43, 49, 57, 0.3); font-size: 12px; font-family: 'Monaco', monospace;">
                <div style="color: var(--text-secondary);">${trade.time.split(',')[1]}</div>
                <div style="color: var(--text-primary); font-weight: 600;">${trade.pair}</div>
                <div style="color: ${trade.type === 'BUY' ? 'var(--accent-green)' : 'var(--accent-red)'};">${trade.type}</div>
                <div style="color: var(--text-primary);">$${trade.entry}</div>
                <div style="color: var(--text-primary);">$${trade.exit}</div>
                <div style="color: ${profitColor}; font-weight: 700;">${parseFloat(trade.profit) >= 0 ? '+' : ''}$${trade.profit}</div>
                <div style="color: ${statusColor}; font-weight: 700;">${trade.status}</div>
            </div>
        `;
    });
    
    container.innerHTML = html || '<div style="text-align: center; padding: 20px; color: var(--text-secondary);">No trades yet</div>';
}

function updateTradingHistory() {
    const container = document.getElementById('tradingHistoryContainer');
    if (!container) return;
    
    let filteredTrades = [...tradingHistory];
    
    // Apply filters
    if (currentFilter === 'winning') {
        filteredTrades = filteredTrades.filter(t => t.status === 'WON');
    } else if (currentFilter === 'losing') {
        filteredTrades = filteredTrades.filter(t => t.status === 'LOST');
    } else if (currentFilter === 'today') {
        const today = new Date().toDateString();
        filteredTrades = filteredTrades.filter(t => new Date(t.time).toDateString() === today);
    } else if (currentFilter === 'week') {
        const weekAgo = new Date();
        weekAgo.setDate(weekAgo.getDate() - 7);
        filteredTrades = filteredTrades.filter(t => new Date(t.time) >= weekAgo);
    }
    
    if (filteredTrades.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
                <div style="font-size: 48px; margin-bottom: 16px;">üìä</div>
                <div style="font-size: 16px;">No trades found</div>
                <div style="font-size: 14px; margin-top: 8px;">Try a different filter</div>
            </div>
        `;
        return;
    }
    
    let html = '';
    filteredTrades.forEach(trade => {
        const profitColor = parseFloat(trade.profit) >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
        const statusColor = trade.status === 'WON' ? 'var(--accent-green)' : 'var(--accent-red)';
        
        html += `
            <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; padding: 12px 0; border-bottom: 1px solid rgba(43, 49, 57, 0.3); font-size: 12px; font-family: 'Monaco', monospace;">
                <div style="color: var(--text-secondary);">${trade.time}</div>
                <div style="color: var(--text-primary); font-weight: 600;">${trade.pair}</div>
                <div style="color: ${trade.type === 'BUY' ? 'var(--accent-green)' : 'var(--accent-red)'};">${trade.type}</div>
                <div style="color: var(--text-primary);">$${trade.amount}</div>
                <div style="color: var(--text-primary);">$${trade.entry}</div>
                <div style="color: var(--text-primary);">$${trade.exit}</div>
                <div style="color: ${profitColor}; font-weight: 700;">${parseFloat(trade.profit) >= 0 ? '+' : ''}$${trade.profit}</div>
                <div style="color: ${statusColor}; font-weight: 700;">${trade.status}</div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

function filterTrades(filter) {
    currentFilter = filter;
    
    // Update button states
    document.querySelectorAll('.chart-controls .chart-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    updateTradingHistory();
}

// ==================== UPDATE DASHBOARD BUTTONS ====================
function updateDashboardButtons() {
    const dashboardLayer = document.getElementById('dashboardLayer');
    if (!dashboardLayer) return;
    
    const actionButtons = dashboardLayer.querySelector('.action-buttons');
    if (!actionButtons) return;
    
    // Clear existing
    actionButtons.innerHTML = '';
    
    const buttons = [
        { text: '‚ö° Trade Now', class: 'btn-trade', action: () => showLayer('tradingLayer') },
        { text: 'üí∞ Deposit', class: 'btn-deposit', action: () => showLayer('depositLayer') },
        { text: 'üí∏ Withdraw', class: 'btn-withdraw', action: () => showLayer('withdrawLayer') },
        { text: 'üìä Portfolio', class: 'btn-portfolio', action: () => showLayer('portfolioLayer') },
        { text: 'üéÅ Referrals', class: 'btn-referrals', action: () => showLayer('referralLayer') },
        { text: 'ü§ñ AI Bots', class: 'btn-referrals', action: () => showLayer('botsLayer') },
        { text: 'üìà History', class: 'btn-portfolio', action: () => showLayer('historyLayer') },
        { text: '‚≠ê Reviews', class: 'btn-reviews', action: () => showLayer('reviewsLayer') }
    ];
    
    buttons.forEach(btn => {
        const button = document.createElement('button');
        button.className = `action-btn ${btn.class}`;
        button.textContent = btn.text;
        button.onclick = btn.action;
        actionButtons.appendChild(button);
    });
}

// ==================== INITIALIZE REFERRAL DATA ====================
function initReferralData() {
    if (currentUser && currentUser.referralCode) {
        const link = `https://cryptopro.com/ref/${currentUser.referralCode}`;
        document.getElementById('userReferralLink').textContent = link;
        
        document.getElementById('totalReferrals').textContent = currentUser.referrals?.length || 0;
        document.getElementById('referralEarnings').textContent = '$' + (currentUser.referralEarnings || 0);
        document.getElementById('withdrawableBonus').textContent = '$' + (currentUser.referralEarnings || 0);
    }
}

// Update initDashboard to include new buttons
const originalInitDashboard2 = initDashboard;
initDashboard = function() {
    originalInitDashboard2();
    updateDashboardButtons();
    initReferralData();
    
    // Update withdraw available balance
    document.getElementById('withdrawAvailableBalance').textContent = '$' + realBalance.toFixed(2);
};

// ==================== PORTFOLIO CHART ====================
function initPortfolioChart() {
    generateMockChart('portfolioChart', 'price');
}

// Update showLayer to initialize portfolio
const originalShowLayer2 = showLayer;
showLayer = function(layerId) {
    originalShowLayer2(layerId);
    if (layerId === 'portfolioLayer') {
        initPortfolioChart();
    }
    if (layerId === 'referralLayer') {
        initReferralData();
    }
};
<!-- LAYER 13: KYC/Verification System -->
<div id="kycLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üîê Account Verification</h1>
            <p>Complete KYC to unlock full trading features and withdrawals</p>
        </div>

        <!-- Verification Status -->
        <div class="chart-section">
            <div id="verificationStatus" style="background: rgba(252, 213, 53, 0.1); border: 2px solid rgba(252, 213, 53, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
                <div style="font-size: 48px; margin-bottom: 12px;">‚ö†Ô∏è</div>
                <h3 style="color: var(--accent-yellow); margin-bottom: 8px;">Verification Pending</h3>
                <p style="color: var(--text-secondary);">Complete all steps below to verify your account</p>
            </div>

            <!-- Verification Steps -->
            <div class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card" id="emailVerifyCard">
                        <div class="stat-icon">üìß</div>
                        <div class="stat-label">Email Verification</div>
                        <div style="margin-top: 12px;">
                            <span class="verification-badge pending">Pending</span>
                        </div>
                    </div>
                    <div class="stat-card" id="phoneVerifyCard">
                        <div class="stat-icon">üì±</div>
                        <div class="stat-label">Phone Verification</div>
                        <div style="margin-top: 12px;">
                            <span class="verification-badge pending">Pending</span>
                        </div>
                    </div>
                    <div class="stat-card" id="idVerifyCard">
                        <div class="stat-icon">üÜî</div>
                        <div class="stat-label">ID Document</div>
                        <div style="margin-top: 12px;">
                            <span class="verification-badge pending">Pending</span>
                        </div>
                    </div>
                    <div class="stat-card" id="selfieVerifyCard">
                        <div class="stat-icon">ü§≥</div>
                        <div class="stat-label">Selfie Verification</div>
                        <div style="margin-top: 12px;">
                            <span class="verification-badge pending">Pending</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- KYC Form -->
            <form onsubmit="submitKYC(event)">
                <h3 style="color: var(--accent-green); margin-bottom: 20px;">üìÑ Personal Information</h3>
                
                <div class="form-group">
                    <label>Full Legal Name</label>
                    <input type="text" id="kycFullName" placeholder="As it appears on ID" required>
                </div>

                <div class="form-group">
                    <label>Date of Birth</label>
                    <input type="date" id="kycDOB" required>
                </div>

                <div class="form-group">
                    <label>Country of Residence</label>
                    <select id="kycCountry" required>
                        <option value="">Select Country</option>
                        <option value="KE">Kenya</option>
                        <option value="NG">Nigeria</option>
                        <option value="ZA">South Africa</option>
                        <option value="EG">Egypt</option>
                        <option value="GH">Ghana</option>
                        <option value="TZ">Tanzania</option>
                        <option value="UG">Uganda</option>
                        <option value="RW">Rwanda</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Address</label>
                    <textarea id="kycAddress" rows="3" placeholder="Full residential address" required></textarea>
                </div>

                <h3 style="color: var(--accent-green); margin: 30px 0 20px;">üì∏ Document Upload</h3>

                <div class="form-group">
                    <label>ID Document Type</label>
                    <select id="kycDocType" required>
                        <option value="">Select Document</option>
                        <option value="passport">Passport</option>
                        <option value="national_id">National ID</option>
                        <option value="drivers_license">Driver's License</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ID Document (Front)</label>
                    <input type="file" id="kycIDFront" accept="image/*,.pdf" required>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        Upload clear photo of ID front side
                    </div>
                </div>

                <div class="form-group">
                    <label>ID Document (Back)</label>
                    <input type="file" id="kycIDBack" accept="image/*,.pdf" required>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        Upload clear photo of ID back side
                    </div>
                </div>

                <div class="form-group">
                    <label>Selfie with ID</label>
                    <input type="file" id="kycSelfie" accept="image/*" required>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        Take a selfie holding your ID next to your face
                    </div>
                </div>

                <div class="form-group">
                    <label>Proof of Address</label>
                    <input type="file" id="kycProofAddress" accept="image/*,.pdf" required>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        Utility bill, bank statement (not older than 3 months)
                    </div>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="kycAgree" required>
                    <label for="kycAgree">I confirm that all information provided is accurate and true</label>
                </div>

                <button type="submit" class="btn-submit">‚úÖ SUBMIT FOR VERIFICATION</button>
            </form>

            <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 20px; margin-top: 20px;">
                <h3 style="color: var(--accent-green); margin-bottom: 12px;">‚úÖ Verification Requirements</h3>
                <ul style="list-style: none; padding: 0; line-height: 2;">
                    <li>‚úì Clear, unedited photos</li>
                    <li>‚úì All document corners visible</li>
                    <li>‚úì No glare or shadows</li>
                    <li>‚úì Documents must be valid (not expired)</li>
                    <li>‚úì Verification takes 1-24 hours</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 14: Support Tickets -->
<div id="supportLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üé´ Support Center</h1>
            <p>Get help from our support team or browse FAQs</p>
        </div>

        <!-- Quick Actions -->
        <div class="action-buttons">
            <button class="action-btn btn-deposit" onclick="openAIChat()">üí¨ Chat with AI</button>
            <button class="action-btn btn-portfolio" onclick="showNewTicketForm()">üìù New Ticket</button>
            <button class="action-btn btn-reviews" onclick="showFAQ()">‚ùì FAQ</button>
        </div>

        <!-- New Ticket Form -->
        <div id="newTicketForm" class="chart-section" style="display: none;">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">üìù Create Support Ticket</h3>
            <form onsubmit="submitTicket(event)">
                <div class="form-group">
                    <label>Category</label>
                    <select id="ticketCategory" required>
                        <option value="">Select Category</option>
                        <option value="deposit">Deposit Issues</option>
                        <option value="withdrawal">Withdrawal Issues</option>
                        <option value="trading">Trading Problems</option>
                        <option value="verification">Verification Help</option>
                        <option value="account">Account Issues</option>
                        <option value="technical">Technical Support</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Priority</label>
                    <select id="ticketPriority" required>
                        <option value="low">Low</option>
                        <option value="medium" selected>Medium</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Subject</label>
                    <input type="text" id="ticketSubject" placeholder="Brief description of issue" required>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea id="ticketDescription" rows="6" placeholder="Describe your issue in detail..." required></textarea>
                </div>

                <div class="form-group">
                    <label>Attachment (Optional)</label>
                    <input type="file" id="ticketAttachment" accept="image/*,.pdf">
                </div>

                <button type="submit" class="btn-submit">üì® Submit Ticket</button>
            </form>
        </div>

        <!-- Tickets List -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">üìã My Tickets</h3>
            <div id="ticketsList"></div>
        </div>

        <!-- FAQ Section -->
        <div id="faqSection" class="chart-section" style="display: none;">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">‚ùì Frequently Asked Questions</h3>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>‚ùì How do I deposit funds?</span>
                    <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-answer">
                    Go to Dashboard ‚Üí Deposit ‚Üí Select payment method ‚Üí Follow instructions. Deposits are credited within 1-10 minutes after verification.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>‚ùì How long do withdrawals take?</span>
                    <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-answer">
                    Withdrawals are processed within 1-24 hours. You must complete KYC verification before making your first withdrawal.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>‚ùì How do AI trading bots work?</span>
                    <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-answer">
                    Select a bot based on your risk tolerance ‚Üí Click "Start Bot" ‚Üí The bot will automatically execute trades 24/7 based on AI analysis.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>‚ùì What is the difference between Demo and Real accounts?</span>
                    <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-answer">
                    Demo account uses virtual money ($25 free) for practice. Real account uses your deposited funds and you can withdraw profits.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>‚ùì How does the referral program work?</span>
                    <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-answer">
                    Share your unique referral link ‚Üí When someone signs up and verifies ‚Üí You both get $25 bonus. Earnings are withdrawable.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span>‚ùì Is my money safe?</span>
                    <span class="faq-arrow">‚ñº</span>
                </div>
                <div class="faq-answer">
                    Yes! We use bank-level encryption, secure payment processors, and keep funds in segregated accounts. Your data is protected with 2FA and advanced security.
                </div>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 15: Notifications Center -->
<div id="notificationsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üîî Notifications</h1>
            <p>Stay updated with your trading activity</p>
        </div>

        <!-- Notification Filters -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üîç</span>
                    <span>Filter Notifications</span>
                </div>
                <div class="chart-controls">
                    <button class="chart-btn active" onclick="filterNotifications('all')">All</button>
                    <button class="chart-btn" onclick="filterNotifications('trades')">Trades</button>
                    <button class="chart-btn" onclick="filterNotifications('transactions')">Transactions</button>
                    <button class="chart-btn" onclick="filterNotifications('system')">System</button>
                </div>
            </div>
        </div>

        <!-- Notifications List -->
        <div class="chart-section">
            <div id="notificationsList"></div>
        </div>
    </div>
</div>

<!-- LAYER 16: Account Settings -->
<div id="settingsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>‚öôÔ∏è Account Settings</h1>
            <p>Manage your account preferences and security</p>
        </div>

        <!-- Settings Tabs -->
        <div class="settings-tabs">
            <button class="settings-tab active" onclick="showSettingsTab('profile')">üë§ Profile</button>
            <button class="settings-tab" onclick="showSettingsTab('security')">üîê Security</button>
            <button class="settings-tab" onclick="showSettingsTab('notifications')">üîî Notifications</button>
            <button class="settings-tab" onclick="showSettingsTab('preferences')">üé® Preferences</button>
        </div>

        <!-- Profile Settings -->
        <div id="profileSettings" class="settings-content active">
            <div class="chart-section">
                <h3 style="color: var(--accent-green); margin-bottom: 20px;">Personal Information</h3>
                <form onsubmit="updateProfile(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="settingsName" placeholder="Your name" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="settingsEmail" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="settingsPhone" placeholder="+254 712 345 678" required>
                    </div>
                    <button type="submit" class="btn-submit">üíæ Save Changes</button>
                </form>
            </div>
        </div>

        <!-- Security Settings -->
        <div id="securitySettings" class="settings-content">
            <div class="chart-section">
                <h3 style="color: var(--accent-green); margin-bottom: 20px;">üîê Password & Security</h3>
                <form onsubmit="changePassword(event)">
                    <div class="form-group">
                        <label>Current Password</label>
                        <input type="password" id="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" id="newPassword" required>
                    </div>
                    <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <button type="submit" class="btn-submit">üîí Change Password</button>
                </form>

                <div style="margin-top: 40px;">
                    <h3 style="color: var(--accent-green); margin-bottom: 20px;">Two-Factor Authentication</h3>
                    <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 4px;">2FA Status</div>
                                <div style="font-size: 14px; color: var(--text-secondary);">Add extra security to your account</div>
                            </div>
                            <button class="toggle-btn" onclick="toggle2FA()">Enable 2FA</button>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 40px;">
                    <h3 style="color: var(--accent-green); margin-bottom: 20px;">Login History</h3>
                    <div id="loginHistory"></div>
                </div>
            </div>
        </div>

        <!-- Notification Settings -->
        <div id="notificationSettings" class="settings-content">
            <div class="chart-section">
                <h3 style="color: var(--accent-green); margin-bottom: 20px;">Notification Preferences</h3>
                
                <div class="settings-option">
                    <div class="settings-option-info">
                        <div class="settings-option-title">Trade Alerts</div>
                        <div class="settings-option-desc">Get notified when trades are executed</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifTrades" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-option">
                    <div class="settings-option-info">
                        <div class="settings-option-title">Deposit Confirmations</div>
                        <div class="settings-option-desc">Get notified when deposits are credited</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifDeposits" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-option">
                    <div class="settings-option-info">
                        <div class="settings-option-title">Withdrawal Updates</div>
                        <div class="settings-option-desc">Get notified about withdrawal status</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifWithdrawals" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-option">
                    <div class="settings-option-info">
                        <div class="settings-option-title">Price Alerts</div>
                        <div class="settings-option-desc">Get notified when prices hit targets</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifPrices" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-option">
                    <div class="settings-option-info">
                        <div class="settings-option-title">Referral Earnings</div>
                        <div class="settings-option-desc">Get notified when you earn from referrals</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifReferrals" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="settings-option">
                    <div class="settings-option-info">
                        <div class="settings-option-title">Marketing Emails</div>
                        <div class="settings-option-desc">Receive promotional offers and updates</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifMarketing">
                        <span class="slider"></span>
                    </label>
                </div>

                <button class="btn-submit" onclick="saveNotificationSettings()">üíæ Save Preferences</button>
            </div>
        </div>

        <!-- Preference Settings -->
        <div id="preferenceSettings" class="settings-content">
            <div class="chart-section">
                <h3 style="color: var(--accent-green); margin-bottom: 20px;">Display Preferences</h3>
                
                <div class="form-group">
                    <label>Theme</label>
                    <select id="themeSelect" onchange="changeTheme()">
                        <option value="dark">üåô Dark Mode</option>
                        <option value="light">‚òÄÔ∏è Light Mode</option>
                        <option value="auto">üîÑ Auto (System)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Language</label>
                    <select id="languageSelect">
                        <option value="en">üá¨üáß English</option>
                        <option value="fr">üá´üá∑ French</option>
                        <option value="sw">üá∞üá™ Swahili</option>
                        <option value="ar">üá∏üá¶ Arabic</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Currency Display</label>
                    <select id="currencySelect">
                        <option value="USD">üíµ USD</option>
                        <option value="KES">üá∞üá™ KES</option>
                        <option value="NGN">üá≥üá¨ NGN</option>
                        <option value="ZAR">üáøüá¶ ZAR</option>
                        <option value="EUR">üá™üá∫ EUR</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Chart Type</label>
                    <select id="chartTypeSelect">
                        <option value="line">Line Chart</option>
                        <option value="candle">Candlestick</option>
                        <option value="bar">Bar Chart</option>
                    </select>
                </div>

                <button class="btn-submit" onclick="savePreferences()">üíæ Save Preferences</button>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 17: Transaction History -->
<div id="transactionsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üí≥ Transaction History</h1>
            <p>Complete record of all your financial transactions</p>
        </div>

        <!-- Transaction Stats -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="totalDepositsCount">0</div>
                    <div class="stat-label">Total Deposits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∏</div>
                    <div class="stat-value" id="totalWithdrawalsCount">0</div>
                    <div class="stat-label">Total Withdrawals</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéÅ</div>
                    <div class="stat-value" id="totalReferralEarnings">$0</div>
                    <div class="stat-label">Referral Earnings</div>
                </div>
            </div>
        </div>

        <!-- Filter Options -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üîç</span>
                    <span>Filter Transactions</span>
                </div>
                <div class="chart-controls">
                    <button class="chart-btn active" onclick="filterTransactions('all')">All</button>
                    <button class="chart-btn" onclick="filterTransactions('deposits')">Deposits</button>
                    <button class="chart-btn" onclick="filterTransactions('withdrawals')">Withdrawals</button>
                    <button class="chart-btn" onclick="filterTransactions('referrals')">Referrals</button>
                </div>
            </div>
        </div>

        <!-- Transactions Table -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">Complete Transaction History</h3>
            <div style="background: rgba(14, 203, 129, 0.05); border-radius: 8px; padding: 16px;">
                <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; font-size: 11px; color: var(--text-secondary); font-weight: 600; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">
                    <div>DATE/TIME</div>
                    <div>TYPE</div>
                    <div>AMOUNT</div>
                    <div>METHOD</div>
                    <div>STATUS</div>
                    <div>ACTIONS</div>
                </div>
                <div id="transactionsContainer" style="max-height: 500px; overflow-y: auto;">
                    <div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 16px;">üí≥</div>
                        <div style="font-size: 16px;">No transactions yet</div>
                        <div style="font-size: 14px; margin-top: 8px;">Your deposits and withdrawals will appear here</div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 20px; text-align: center;">
                <button class="action-btn btn-portfolio" onclick="exportTransactions()">üì• Export to CSV</button>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 18: Education Center -->
<div id="educationLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üìö Education Center</h1>
            <p>Learn crypto trading from beginner to expert</p>
        </div>

        <!-- Learning Paths -->
        <div class="stats-section">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">üéØ Learning Paths</h3>
            <div class="stats-grid">
                <div class="stat-card learning-card" onclick="showCourse('beginner')">
                    <div class="stat-icon">üå±</div>
                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">Beginner</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Start your trading journey</div>
                    <div style="margin-top: 12px; font-size: 12px; color: var(--accent-green);">10 Lessons ‚Ä¢ 2 hours</div>
                </div>

                <div class="stat-card learning-card" onclick="showCourse('intermediate')">
                    <div class="stat-icon">üìà</div>
                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">Intermediate</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Advanced trading strategies</div>
                    <div style="margin-top: 12px; font-size: 12px; color: var(--accent-green);">15 Lessons ‚Ä¢ 4 hours</div>
                </div>

                <div class="stat-card learning-card" onclick="showCourse('advanced')">
                    <div class="stat-icon">üöÄ</div>
                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">Advanced</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Professional techniques</div>
                    <div style="margin-top: 12px; font-size: 12px; color: var(--accent-green);">20 Lessons ‚Ä¢ 6 hours</div>
                </div>

                <div class="stat-card learning-card" onclick="showCourse('bots')">
                    <div class="stat-icon">ü§ñ</div>
                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">Bot Trading</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Master automated trading</div>
                    <div style="margin-top: 12px; font-size: 12px; color: var(--accent-green);">12 Lessons ‚Ä¢ 3 hours</div>
                </div>
            </div>
        </div>

        <!-- Course Content -->
        <div class="chart-section" id="courseContent">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">üìñ Featured Lessons</h3>
            
            <div class="lesson-item">
                <div class="lesson-icon">üì∫</div>
                <div class="lesson-content">
                    <div class="lesson-title">What is Cryptocurrency?</div>
                    <div class="lesson-desc">Learn the basics of cryptocurrency and blockchain technology</div>
                    <div class="lesson-meta">
                        <span>üïê 15 min</span>
                        <span>üé• Video</span>
                        <span>‚≠ê Beginner</span>
                    </div>
                </div>
                <button class="lesson-btn">Start</button>
            </div>

            <div class="lesson-item">
                <div class="lesson-icon">üìä</div>
                <div class="lesson-content">
                    <div class="lesson-title">Reading Charts & Indicators</div>
                    <div class="lesson-desc">Understand candlesticks, support/resistance, and technical indicators</div>
                    <div class="lesson-meta">
                        <span>üïê 25 min</span>
                        <span>üìñ Article</span>
                        <span>‚≠ê Intermediate</span>
                    </div>
                </div>
                <button class="lesson-btn">Start</button>
            </div>

            <div class="lesson-item">
                <div class="lesson-icon">üí∞</div>
                <div class="lesson-content">
                    <div class="lesson-title">Risk Management Strategies</div>
                    <div class="lesson-desc">Learn how to protect your capital and manage risk effectively</div>
                    <div class="lesson-meta">
                        <span>üïê 20 min</span>
                        <span>üé• Video</span>
                        <span>‚≠ê Intermediate</span>
                    </div>
                </div>
                <button class="lesson-btn">Start</button>
            </div>

            <div class="lesson-item">
                <div class="lesson-icon">ü§ñ</div>
                <div class="lesson-content">
                    <div class="lesson-title">Introduction to Bot Trading</div>
                    <div class="lesson-desc">How AI bots can automate your trading strategy</div>
                    <div class="lesson-meta">
                        <span>üïê 30 min</span>
                        <span>üìñ Article</span>
                        <span>‚≠ê Advanced</span>
                    </div>
                </div>
                <button class="lesson-btn">Start</button>
            </div>
        </div>

        <!-- Glossary -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">üìñ Trading Glossary</h3>
            <div class="glossary-grid">
                <div class="glossary-item">
                    <div class="glossary-term">Bull Market</div>
                    <div class="glossary-definition">A market condition where prices are rising or expected to rise</div>
                </div>
                <div class="glossary-item">
                    <div class="glossary-term">Bear Market</div>
                    <div class="glossary-definition">A market condition where prices are falling or expected to fall</div>
                </div>
                <div class="glossary-item">
                    <div class="glossary-term">HODL</div>
                    <div class="glossary-definition">Hold On for Dear Life - long-term holding strategy</div>
                </div>
                <div class="glossary-item">
                    <div class="glossary-term">Stop Loss</div>
                    <div class="glossary-definition">An order to sell when price reaches a certain level to limit losses</div>
                </div>
                <div class="glossary-item">
                    <div class="glossary-term">Take Profit</div>
                    <div class="glossary-definition">An order to sell when price reaches a target to secure gains</div>
                </div>
                <div class="glossary-item">
                    <div class="glossary-term">Volatility</div>
                    <div class="glossary-definition">The degree of price variation over time</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- LAYER 19: Leaderboard -->
<div id="leaderboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üèÜ Leaderboard</h1>
            <p>Top traders and highest earners</p>
        </div>

        <!-- Leaderboard Tabs -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">
                    <span>üèÖ</span>
                    <span>Rankings</span>
                </div>
                <div class="chart-controls">
                    <button class="chart-btn active" onclick="showLeaderboard('profit')">üí∞ Top Profit</button>
                    <button class="chart-btn" onclick="showLeaderboard('referrals')">üë• Top Referrers</button>
                    <button class="chart-btn" onclick="showLeaderboard('trades')">üìä Most Trades</button>
                    <button class="chart-btn" onclick="showLeaderboard('winrate')">üéØ Best Win Rate</button>
                </div>
            </div>
        </div>

        <!-- Your Rank -->
        <div style="background: linear-gradient(135deg, rgba(14, 203, 129, 0.2), rgba(0, 217, 255, 0.2)); border: 2px solid var(--accent-green); border-radius: 16px; padding: 20px; margin-bottom: 20px; text-align: center;">
            <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Your Current Rank</div>
            <div style="font-size: 48px; font-weight: 900; color: var(--accent-green);" id="userRank">#-</div>
            <div style="font-size: 14px; color: var(--text-secondary); margin-top: 8px;">Keep trading to climb the ranks!</div>
        </div>

        <!-- Leaderboard List -->
        <div class="chart-section" id="leaderboardContent"></div>
    </div>
</div>

<!-- LAYER 20: Price Alerts -->
<div id="alertsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn" onclick="showLayer('dashboardLayer')" style="background: transparent; color: var(--accent-blue); border: 1px solid var(--accent-blue);">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üîî Price Alerts</h1>
            <p>Get notified when prices hit your targets</p>
        </div>

        <!-- Create Alert -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 20px;">‚ûï Create New Alert</h3>
            <form onsubmit="createPriceAlert(event)">
                <div class="form-group">
                    <label>Trading Pair</label>
                    <select id="alertPair" required>
                        <option value="BTCUSDT">BTC/USDT</option>
                        <option value="ETHUSDT">ETH/USDT</option>
                        <option value="BNBUSDT">BNB/USDT</option>
                        <option value="SOLUSDT">SOL/USDT</option>
                        <option value="XRPUSDT">XRP/USDT</option>
                        <option value="ADAUSDT">ADA/USDT</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Alert Type</label>
                    <select id="alertType" required>
                        <option value="above">Price goes above</option>
                        <option value="below">Price goes below</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Target Price (USD)</label>
                    <input type="number" id="alertPrice" step="0.01" placeholder="Enter target price" required>
                </div>

                <div class="form-group">
                    <label>Note (Optional)</label>
                    <input type="text" id="alertNote" placeholder="Reminder note">
                </div>

                <button type="submit" class="btn-submit">üîî Create Alert</button>
            </form>
        </div>

        <!-- Active Alerts -->
        <div class="chart-section">
            <h3 style="color: var(--accent-green); margin-bottom: 16px;">üìã Active Alerts</h3>
            <div id="alertsList"></div>
        </div>
    </div>
</div>

<!-- AI Chat Widget (Fixed Bottom Right) -->
<div id="aiChatWidget" class="ai-chat-widget">
    <div class="ai-chat-header">
        <div style="display: flex; align-items: center; gap: 12px;">
            <div class="ai-avatar">ü§ñ</div>
            <div>
                <div style="font-weight: 600; font-size: 14px;">AI Assistant</div>
                <div style="font-size: 11px; opacity: 0.8;">Always here to help</div>
            </div>
        </div>
        <button class="ai-chat-close" onclick="closeAIChat()">√ó</button>
    </div>

    <div class="ai-chat-messages" id="aiChatMessages">
        <div class="ai-message">
            <div class="ai-message-avatar">ü§ñ</div>
            <div class="ai-message-content">
                <div class="ai-message-text">Hi! I'm your AI trading assistant. How can I help you today?</div>
                <div class="ai-message-time">Just now</div>
            </div>
        </div>
    </div>

    <div class="ai-chat-quick-actions">
        <button class="quick-action-btn" onclick="sendQuickMessage('How do I deposit?')">üí∞ Deposit Help</button>
        <button class="quick-action-btn" onclick="sendQuickMessage('How do bots work?')">ü§ñ Bot Trading</button>
        <button class="quick-action-btn" onclick="sendQuickMessage('Withdrawal process?')">üí∏ Withdrawals</button>
    </div>

    <div class="ai-chat-input">
        <input type="text" id="aiChatInput" placeholder="Type your message..." onkeypress="handleAIChatKeyPress(event)">
        <button onclick="sendAIMessage()">
            <span style="font-size: 20px;">üì§</span>
        </button>
    </div>
</div>

<!-- AI Chat Button (Always visible) -->
<div class="ai-chat-button" onclick="openAIChat()">
    <div class="ai-chat-icon">ü§ñ</div>
    <div class="ai-chat-notification" id="aiChatNotification" style="display: none;">1</div>
</div>

<!-- Add new styles -->
<style>
/* Verification Badge */
.verification-badge {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    display: inline-block;
}

.verification-badge.pending {
    background: rgba(252, 213, 53, 0.1);
    color: var(--accent-yellow);
}

.verification-badge.verified {
    background: rgba(14, 203, 129, 0.1);
    color: var(--accent-green);
}

.verification-badge.rejected {
    background: rgba(246, 70, 93, 0.1);
    color: var(--accent-red);
}

/* Settings Tabs */
.settings-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
    border-bottom: 2px solid var(--border-color);
    overflow-x: auto;
}

.settings-tab {
    padding: 12px 24px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    font-weight: 600;
    border-bottom: 3px solid transparent;
    transition: all 0.3s;
    white-space: nowrap;
}

.settings-tab.active {
    color: var(--accent-green);
    border-bottom-color: var(--accent-green);
}

.settings-content {
    display: none;
}

.settings-content.active {
    display: block;
}

/* Settings Options */
.settings-option {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-tertiary);
    border-radius: 12px;
    margin-bottom: 12px;
}

.settings-option-info {
    flex: 1;
}

.settings-option-title {
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 4px;
}

.settings-option-desc {
    font-size: 13px;
    color: var(--text-secondary);
}

/* Toggle Switch */
.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--border-color);
    transition: 0.4s;
    border-radius: 26px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: var(--accent-green);
}

input:checked + .slider:before {
    transform: translateX(24px);
}

/* FAQ Items */
.faq-item {
    background: var(--bg-tertiary);
    border-radius: 12px;
    margin-bottom: 12px;
    overflow: hidden;
}

.faq-question {
    padding: 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    transition: all 0.3s;
}

.faq-question:hover {
    background: rgba(14, 203, 129, 0.05);
}

.faq-arrow {
    transition: transform 0.3s;
    font-size: 12px;
}

.faq-question.active .faq-arrow {
    transform: rotate(180deg);
}

.faq-answer {
    padding: 0 20px;
    max-height: 0;
    overflow: hidden;
    transition: all 0.3s;
    color: var(--text-secondary);
    line-height: 1.6;
}

.faq-answer.active {
    padding: 0 20px 20px 20px;
    max-height: 500px;
}

/* Learning Card */
.learning-card {
    cursor: pointer;
    transition: all 0.3s;
}

.learning-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(14, 203, 129, 0.3);
    border-color: var(--accent-green);
}

/* Lesson Item */
.lesson-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: var(--bg-tertiary);
    border-radius: 12px;
    margin-bottom: 12px;
    transition: all 0.3s;
}

.lesson-item:hover {
    background: rgba(14, 203, 129, 0.05);
}

.lesson-icon {
    font-size: 32px;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(14, 203, 129, 0.1);
    border-radius: 12px;
}

.lesson-content {
    flex: 1;
}

.lesson-title {
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 4px;
}

.lesson-desc {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.lesson-meta {
    display: flex;
    gap: 16px;
    font-size: 12px;
    color: var(--text-secondary);
}

.lesson-btn {
    padding: 10px 24px;
    background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.lesson-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 203, 129, 0.4);
}

/* Glossary */
.glossary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 16px;
}

.glossary-item {
    background: var(--bg-tertiary);
    padding: 16px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
}

.glossary-term {
    font-weight: 700;
    font-size: 16px;
    color: var(--accent-green);
    margin-bottom: 8px;
}

.glossary-definition {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.6;
}

/* AI Chat Widget */
.ai-chat-widget {
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 380px;
    max-width: calc(100vw - 40px);
    height: 600px;
    max-height: calc(100vh - 120px);
    background: var(--bg-secondary);
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
    border: 1px solid var(--border-color);
    z-index: 9998;
    display: none;
    flex-direction: column;
    animation: slideInUp 0.3s ease-out;
}

.ai-chat-widget.active {
    display: flex;
}

@keyframes slideInUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.ai-chat-header {
    padding: 16px 20px;
    background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
    border-radius: 20px 20px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
}

.ai-avatar {
    width: 36px;
    height: 36px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.ai-chat-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    font-size: 24px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

.ai-chat-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

.ai-chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    background: var(--bg-primary);
}

.ai-message, .user-message {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
    animation: messageSlideIn 0.3s ease-out;
}

@keyframes messageSlideIn {
    from {
        transform: translateY(10px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.user-message {
    flex-direction: row-reverse;
}

.ai-message-avatar {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
}

.user-message-avatar {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, var(--accent-blue), #0099cc);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
}

.ai-message-content, .user-message-content {
    flex: 1;
}

.ai-message-text {
    background: var(--bg-tertiary);
    padding: 12px 16px;
    border-radius: 12px 12px 12px 4px;
    font-size: 14px;
    line-height: 1.6;
}

.user-message-text {
    background: linear-gradient(135deg, var(--accent-blue), #0099cc);
    padding: 12px 16px;
    border-radius: 12px 12px 4px 12px;
    font-size: 14px;
    line-height: 1.6;
    color: white;
}

.ai-message-time {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 4px;
}

.ai-chat-quick-actions {
    padding: 12px 20px;
    display: flex;
    gap: 8px;
    overflow-x: auto;
    border-top: 1px solid var(--border-color);
}

.quick-action-btn {
    padding: 8px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    color: var(--text-primary);
    font-size: 13px;
    white-space: nowrap;
    cursor: pointer;
    transition: all 0.3s;
}

.quick-action-btn:hover {
    background: rgba(14, 203, 129, 0.1);
    border-color: var(--accent-green);
}

.ai-chat-input {
    display: flex;
    gap: 12px;
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
}

.ai-chat-input input {
    flex: 1;
    padding: 12px 16px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 24px;
    color: var(--text-primary);
    outline: none;
    font-size: 14px;
}

.ai-chat-input input:focus {
    border-color: var(--accent-green);
}

.ai-chat-input button {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.ai-chat-input button:hover {
    transform: scale(1.1);
}

/* AI Chat Button */
.ai-chat-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(14, 203, 129, 0.4);
    transition: all 0.3s;
    z-index: 9997;
    animation: pulse 2s infinite;
}

.ai-chat-button:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 30px rgba(14, 203, 129, 0.6);
}

.ai-chat-icon {
    font-size: 32px;
}

.ai-chat-notification {
    position: absolute;
    top: -4px;
    right: -4px;
    width: 24px;
    height: 24px;
    background: var(--accent-red);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 700;
    color: white;
}

/* Toggle Button */
.toggle-btn {
    padding: 8px 20px;
    background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.toggle-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 203, 129, 0.4);
}

/* Responsive */
@media (max-width: 768px) {
    .ai-chat-widget {
        width: calc(100vw - 20px);
        right: 10px;
        bottom: 80px;
    }
    
    .settings-tabs {
        gap: 4px;
    }
    
    .settings-tab {
        padding: 10px 16px;
        font-size: 13px;
    }
}
// ==================== ADDITIONAL GLOBAL VARIABLES ====================
let notifications = [];
let tickets = [];
let priceAlerts = [];
let transactions = [];
let kycStatus = 'pending';
let aiChatMessages = [];

// ==================== KYC FUNCTIONS ====================
function submitKYC(e) {
    e.preventDefault();
    
    const fullName = document.getElementById('kycFullName').value;
    const dob = document.getElementById('kycDOB').value;
    const country = document.getElementById('kycCountry').value;
    const address = document.getElementById('kycAddress').value;
    const docType = document.getElementById('kycDocType').value;
    
    // Simulate KYC submission
    alert('‚úÖ KYC Documents Submitted!\n\nYour documents are under review.\n\nVerification usually takes 1-24 hours.\n\nYou will receive an email once your account is verified.');
    
    // Update verification badges
    setTimeout(() => {
        document.getElementById('emailVerifyCard').querySelector('.verification-badge').textContent = 'Under Review';
        document.getElementById('phoneVerifyCard').querySelector('.verification-badge').textContent = 'Under Review';
        document.getElementById('idVerifyCard').querySelector('.verification-badge').textContent = 'Under Review';
        document.getElementById('selfieVerifyCard').querySelector('.verification-badge').textContent = 'Under Review';
        
        addNotification('KYC documents submitted successfully', 'system');
    }, 1000);
    
    // Simulate approval after 5 seconds (for demo purposes)
    setTimeout(() => {
        kycStatus = 'verified';
        document.getElementById('verificationStatus').innerHTML = `
            <div style="font-size: 48px; margin-bottom: 12px;">‚úÖ</div>
            <h3 style="color: var(--accent-green); margin-bottom: 8px;">Verified!</h3>
            <p style="color: var(--text-secondary);">Your account has been successfully verified</p>
        `;
        
        document.querySelectorAll('.verification-badge').forEach(badge => {
            badge.textContent = 'Verified';
            badge.className = 'verification-badge verified';
        });
        
        addNotification('üéâ Account verified! You can now withdraw funds.', 'system');
    }, 5000);
    
    return false;
}

// ==================== SUPPORT TICKET FUNCTIONS ====================
function showNewTicketForm() {
    document.getElementById('newTicketForm').style.display = 'block';
    document.getElementById('faqSection').style.display = 'none';
}

function showFAQ() {
    document.getElementById('faqSection').style.display = 'block';
    document.getElementById('newTicketForm').style.display = 'none';
}

function toggleFAQ(element) {
    element.classList.toggle('active');
    const answer = element.nextElementSibling;
    answer.classList.toggle('active');
}

function submitTicket(e) {
    e.preventDefault();
    
    const ticket = {
        id: 'TKT' + Date.now(),
        category: document.getElementById('ticketCategory').value,
        priority: document.getElementById('ticketPriority').value,
        subject: document.getElementById('ticketSubject').value,
        description: document.getElementById('ticketDescription').value,
        status: 'open',
        created: new Date().toLocaleString(),
        responses: []
    };
    
    tickets.unshift(ticket);
    renderTickets();
    
    alert('‚úÖ Support ticket created!\n\nTicket ID: ' + ticket.id + '\n\nOur team will respond within 24 hours.');
    
    // Reset form
    document.getElementById('ticketCategory').value = '';
    document.getElementById('ticketPriority').value = 'medium';
    document.getElementById('ticketSubject').value = '';
    document.getElementById('ticketDescription').value = '';
    document.getElementById('newTicketForm').style.display = 'none';
    
    // Add notification
    addNotification('Support ticket created: ' + ticket.subject, 'system');
    
    // Simulate response after 3 seconds
    setTimeout(() => {
        ticket.responses.push({
            from: 'Support Team',
            message: 'Thank you for contacting us. We have received your ticket and our team is reviewing it. We will get back to you shortly.',
            time: new Date().toLocaleString()
        });
        ticket.status = 'in_progress';
        renderTickets();
        addNotification('Support team responded to your ticket', 'system');
    }, 3000);
    
    return false;
}

function renderTickets() {
    const container = document.getElementById('ticketsList');
    if (!container) return;
    
    if (tickets.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                <div style="font-size: 48px; margin-bottom: 16px;">üé´</div>
                <div style="font-size: 16px;">No tickets yet</div>
                <div style="font-size: 14px; margin-top: 8px;">Create a ticket to get help from our support team</div>
            </div>
        `;
        return;
    }
    
    let html = '';
    tickets.forEach(ticket => {
        const statusColor = ticket.status === 'open' ? 'var(--accent-yellow)' : 
                           ticket.status === 'in_progress' ? 'var(--accent-blue)' : 
                           ticket.status === 'resolved' ? 'var(--accent-green)' : 
                           'var(--text-secondary)';
        
        const priorityColor = ticket.priority === 'urgent' ? 'var(--accent-red)' : 
                             ticket.priority === 'high' ? 'var(--accent-yellow)' : 
                             'var(--text-secondary)';
        
        html += `
            <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px; margin-bottom: 16px; border: 1px solid var(--border-color);">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <div>
                        <div style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">${ticket.subject}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">Ticket ID: ${ticket.id}</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="display: inline-block; padding: 4px 12px; background: ${statusColor}20; color: ${statusColor}; border-radius: 12px; font-size: 11px; font-weight: 600; margin-bottom: 4px;">
                            ${ticket.status.toUpperCase().replace('_', ' ')}
                        </div>
                        <div style="font-size: 11px; color: ${priorityColor};">
                            ${ticket.priority.toUpperCase()} PRIORITY
                        </div>
                    </div>
                </div>
                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 12px; line-height: 1.6;">
                    ${ticket.description}
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: var(--text-secondary);">
                    <span>üìÅ ${ticket.category}</span>
                    <span>üïê ${ticket.created}</span>
                </div>
                ${ticket.responses.length > 0 ? `
                    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                        <div style="font-weight: 600; font-size: 13px; margin-bottom: 8px; color: var(--accent-green);">Latest Response:</div>
                        <div style="background: rgba(14, 203, 129, 0.05); padding: 12px; border-radius: 8px;">
                            <div style="font-size: 13px; margin-bottom: 4px;">${ticket.responses[ticket.responses.length - 1].message}</div>
                            <div style="font-size: 11px; color: var(--text-secondary);">
                                ${ticket.responses[ticket.responses.length - 1].from} ‚Ä¢ ${ticket.responses[ticket.responses.length - 1].time}
                            </div>
                        </div>
                    </div>
                ` : ''}
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// ==================== NOTIFICATIONS FUNCTIONS ====================
function addNotification(message, type = 'system') {
    const notification = {
        id: Date.now(),
        message,
        type, // trades, transactions, system
        time: new Date().toLocaleString(),
        read: false
    };
    
    notifications.unshift(notification);
    renderNotifications();
    
    // Show AI chat notification if chat is closed
    const aiWidget = document.getElementById('aiChatWidget');
    if (!aiWidget.classList.contains('active')) {
        const notifBadge = document.getElementById('aiChatNotification');
        notifBadge.style.display = 'flex';
        notifBadge.textContent = notifications.filter(n => !n.read).length;
    }
}

function renderNotifications() {
    const container = document.getElementById('notificationsList');
    if (!container) return;
    
    if (notifications.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
                <div style="font-size: 48px; margin-bottom: 16px;">üîî</div>
                <div style="font-size: 16px;">No notifications yet</div>
                <div style="font-size: 14px; margin-top: 8px;">You'll see your notifications here</div>
            </div>
        `;
        return;
    }
    
    let html = '';
    notifications.forEach(notif => {
        const icon = notif.type === 'trades' ? 'üìä' : 
                    notif.type === 'transactions' ? 'üí≥' : 
                    'üîî';
        
        html += `
            <div style="background: ${notif.read ? 'var(--bg-tertiary)' : 'rgba(14, 203, 129, 0.05)'}; padding: 16px; border-radius: 12px; margin-bottom: 12px; border-left: 3px solid var(--accent-green);">
                <div style="display: flex; align-items: start; gap: 12px;">
                    <div style="font-size: 24px;">${icon}</div>
                    <div style="flex: 1;">
                        <div style="font-size: 14px; margin-bottom: 4px; ${!notif.read ? 'font-weight: 600;' : ''}">${notif.message}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">${notif.time}</div>
                    </div>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

function filterNotifications(filter) {
    // Update UI (this is a simplified version)
    console.log('Filter notifications:', filter);
}

// ==================== SETTINGS FUNCTIONS ====================
function showSettingsTab(tab) {
    // Hide all tabs
    document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.settings-content').forEach(c => c.classList.remove('active'));
    
    // Show selected tab
    event.target.classList.add('active');
    document.getElementById(tab + 'Settings').classList.add('active');
}

function updateProfile(e) {
    e.preventDefault();
    
    const name = document.getElementById('settingsName').value;
    const email = document.getElementById('settingsEmail').value;
    const phone = document.getElementById('settingsPhone').value;
    
    if (currentUser) {
        currentUser.name = name;
        currentUser.email = email;
        currentUser.phone = phone;
        localStorage.setItem('cryptoproUser', JSON.stringify(currentUser));
        
        alert('‚úÖ Profile updated successfully!');
        addNotification('Profile information updated', 'system');
    }
    
    return false;
}

function changePassword(e) {
    e.preventDefault();
    
    const current = document.getElementById('currentPassword').value;
    const newPass = document.getElementById('newPassword').value;
    const confirm = document.getElementById('confirmPassword').value;
    
    if (newPass !== confirm) {
        alert('‚ùå New passwords do not match!');
        return false;
    }
    
    if (newPass.length < 6) {
        alert('‚ùå Password must be at least 6 characters!');
        return false;
    }
    
    alert('‚úÖ Password changed successfully!');
    addNotification('Password updated successfully', 'system');
    
    // Clear form
    document.getElementById('currentPassword').value = '';
    document.getElementById('newPassword').value = '';
    document.getElementById('confirmPassword').value = '';
    
    return false;
}

function toggle2FA() {
    alert('üîê 2FA Setup\n\nTwo-factor authentication adds an extra layer of security to your account.\n\nThis feature will be available soon.');
}

function saveNotificationSettings() {
    const settings = {
        trades: document.getElementById('notifTrades').checked,
        deposits: document.getElementById('notifDeposits').checked,
        withdrawals: document.getElementById('notifWithdrawals').checked,
        prices: document.getElementById('notifPrices').checked,
        referrals: document.getElementById('notifReferrals').checked,
        marketing: document.getElementById('notifMarketing').checked
    };
    
    localStorage.setItem('notificationSettings', JSON.stringify(settings));
    alert('‚úÖ Notification preferences saved!');
    addNotification('Notification settings updated', 'system');
}

function changeTheme() {
    const theme = document.getElementById('themeSelect').value;
    // Theme changing logic would go here
    alert('Theme changed to: ' + theme);
}

function savePreferences() {
    const prefs = {
        theme: document.getElementById('themeSelect').value,
        language: document.getElementById('languageSelect').value,
        currency: document.getElementById('currencySelect').value,
        chartType: document.getElementById('chartTypeSelect').value
    };
    
    localStorage.setItem('userPreferences', JSON.stringify(prefs));
    alert('‚úÖ Preferences saved!');
    addNotification('Display preferences updated', 'system');
}

// ==================== TRANSACTION FUNCTIONS ====================
function filterTransactions(filter) {
    console.log('Filter transactions:', filter);
}

function exportTransactions() {
    alert('üì• Export Transactions\n\nYour transaction history will be downloaded as a CSV file.');
}

// ==================== EDUCATION FUNCTIONS ====================
function showCourse(level) {
    alert(`üìö ${level.toUpperCase()} Course\n\nOpening ${level} level trading course...\n\nThis will include video lessons, articles, and quizzes.`);
}

// ==================== LEADERBOARD FUNCTIONS ====================
function showLeaderboard(type) {
    const container = document.getElementById('leaderboardContent');
    if (!container) return;
    
    const leaderboards = {
        profit: [
            { rank: 1, name: 'Felix K.', location: 'üá∞üá™ Kenya', value: '$42,450', avatar: 'üë®' },
            { rank: 2, name: 'Sarah M.', location: 'üá≥üá¨ Nigeria', value: '$38,920', avatar: 'üë©' },
            { rank: 3, name: 'Michael O.', location: 'üáøüá¶ South Africa', value: '$35,680', avatar: 'üë®' },
            { rank: 4, name: 'Amina B.', location: 'üá™üá¨ Egypt', value: '$32,340', avatar: 'üë©' },
            { rank: 5, name: 'David N.', location: 'üá¨üá≠ Ghana', value: '$28,950', avatar: 'üë®' },
            { rank: 6, name: 'Emma W.', location: 'üá∑üáº Rwanda', value: '$25,720', avatar: 'üë©' },
            { rank: 7, name: 'James K.', location: 'üáπüáø Tanzania', value: '$22,480', avatar: 'üë®' },
            { rank: 8, name: 'Fatima A.', location: 'üá∫üá¨ Uganda', value: '$19,650', avatar: 'üë©' },
            { rank: 9, name: 'Peter L.', location: 'üá∞üá™ Kenya', value: '$17,320', avatar: 'üë®' },
            { rank: 10, name: 'Grace N.', location: 'üá≥üá¨ Nigeria', value: '$15,890', avatar: 'üë©' }
        ],
        referrals: [
            { rank: 1, name: 'James K.', location: 'üá∞üá™ Kenya', value: '284 referrals', avatar: 'üë®' },
            { rank: 2, name: 'Sarah M.', location: 'üá≥üá¨ Nigeria', value: '197 referrals', avatar: 'üë©' },
            { rank: 3, name: 'Michael O.', location: 'üáøüá¶ South Africa', value: '156 referrals', avatar: 'üë®' },
            { rank: 4, name: 'Amina B.', location: 'üá™üá¨ Egypt', value: '143 referrals', avatar: 'üë©' },
            { rank: 5, name: 'David N.', location: 'üá¨üá≠ Ghana', value: '128 referrals', avatar: 'üë®' }
        ],
        trades: [
            { rank: 1, name: 'Felix K.', location: 'üá∞üá™ Kenya', value: '8,234 trades', avatar: 'üë®' },
            { rank: 2, name: 'Sarah M.', location: 'üá≥üá¨ Nigeria', value: '7,456 trades', avatar: 'üë©' },
            { rank: 3, name: 'Michael O.', location: 'üáøüá¶ South Africa', value: '6,892 trades', avatar: 'üë®' },
            { rank: 4, name: 'Amina B.', location: 'üá™üá¨ Egypt', value: '5,674 trades', avatar: 'üë©' },
            { rank: 5, name: 'David N.', location: 'üá¨üá≠ Ghana', value: '4,923 trades', avatar: 'üë®' }
        ],
        winrate: [
            { rank: 1, name: 'Emma W.', location: 'üá∑üáº Rwanda', value: '94.2%', avatar: 'üë©' },
            { rank: 2, name: 'Felix K.', location: 'üá∞üá™ Kenya', value: '92.8%', avatar: 'üë®' },
            { rank: 3, name: 'Sarah M.', location: 'üá≥üá¨ Nigeria', value: '91.5%', avatar: 'üë©' },
            { rank: 4, name: 'Michael O.', location: 'üáøüá¶ South Africa', value: '89.7%', avatar: 'üë®' },
            { rank: 5, name: 'Amina B.', location: 'üá™üá¨ Egypt', value: '88.3%', avatar: 'üë©' }
        ]
    };
    
    const data = leaderboards[type];
    let html = '';
    
    data.forEach(item => {
        const rankColor = item.rank === 1 ? '#FFD700' : item.rank === 2 ? '#C0C0C0' : item.rank === 3 ? '#CD7F32' : 'var(--text-secondary)';
        
        html += `
            <div style="display: flex; align-items: center; gap: 16px; padding: 20px; background: var(--bg-tertiary); border-radius: 12px; margin-bottom: 12px; border: 2px solid ${item.rank <= 3 ? rankColor + '40' : 'transparent'};">
                <div style="width: 48px; height: 48px; background: ${rankColor}40; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 900; color: ${rankColor};">
                    ${item.rank}
                </div>
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                    ${item.avatar}
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">${item.name}</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">${item.location}</div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 20px; font-weight: 700; color: var(--accent-green);">${item.value}</div>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// ==================== PRICE ALERTS FUNCTIONS ====================
function createPriceAlert(e) {
    e.preventDefault();
    
    const alert = {
        id: Date.now(),
        pair: document.getElementById('alertPair').value,
        type: document.getElementById('alertType').value,
        price: parseFloat(document.getElementById('alertPrice').value),
        note: document.getElementById('alertNote').value,
        created: new Date().toLocaleString(),
        active: true
    };
    
    priceAlerts.push(alert);
    renderPriceAlerts();
    
    addNotification(`Price alert created for ${alert.pair}`, 'system');
    alert('‚úÖ Price alert created!\n\nYou will be notified when ' + alert.pair + ' goes ' + alert.type + ' $' + alert.price);
    
    // Reset form
    document.getElementById('alertPrice').value = '';
    document.getElementById('alertNote').value = '';
    
    return false;
}

function renderPriceAlerts() {
    const container = document.getElementById('alertsList');
    if (!container) return;
    
    if (priceAlerts.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                <div style="font-size: 48px; margin-bottom: 16px;">üîî</div>
                <div style="font-size: 16px;">No active alerts</div>
                <div style="font-size: 14px; margin-top: 8px;">Create an alert to get notified about price changes</div>
            </div>
        `;
        return;
    }
    
    let html = '';
    priceAlerts.forEach((alert, index) => {
        html += `
            <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 12px; margin-bottom: 12px; border: 1px solid var(--border-color);">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">${alert.pair}</div>
                        <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">
                            Notify when price goes <strong>${alert.type}</strong> <strong style="color: var(--accent-green);">$${alert.price.toFixed(2)}</strong>
                        </div>
                        ${alert.note ? `<div style="font-size: 13px; color: var(--text-secondary);">üìù ${alert.note}</div>` : ''}
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">Created: ${alert.created}</div>
                    </div>
                    <button onclick="deletePriceAlert(${index})" style="background: rgba(246, 70, 93, 0.1); color: var(--accent-red); border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">
                        üóëÔ∏è Delete
                    </button>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

function deletePriceAlert(index) {
    if (confirm('Delete this price alert?')) {
        priceAlerts.splice(index, 1);
        renderPriceAlerts();
        addNotification('Price alert deleted', 'system');
    }
}

// ==================== AI CHAT FUNCTIONS ====================
function openAIChat() {
    const widget = document.getElementById('aiChatWidget');
    widget.classList.add('active');
    document.getElementById('aiChatNotification').style.display = 'none';
    
    // Mark notifications as read
    notifications.forEach(n => n.read = true);
    
    // Auto-scroll to bottom
    setTimeout(() => {
        const messages = document.getElementById('aiChatMessages');
        messages.scrollTop = messages.scrollHeight;
    }, 100);
}

function closeAIChat() {
    document.getElementById('aiChatWidget').classList.remove('active');
}

function handleAIChatKeyPress(event) {
    if (event.key === 'Enter') {
        sendAIMessage();
    }
}

function sendQuickMessage(message) {
    document.getElementById('aiChatInput').value = message;
    sendAIMessage();
}

function sendAIMessage() {
    const input = document.getElementById('aiChatInput');
    const message = input.value.trim();
    
    if (!message) return;
    
    // Add user message
    addChatMessage(message, 'user');
    input.value = '';
    
    // Simulate typing indicator
    const messagesDiv = document.getElementById('aiChatMessages');
    const typingDiv = document.createElement('div');
    typingDiv.className = 'ai-message';
    typingDiv.innerHTML = `
        <div class="ai-message-avatar">ü§ñ</div>
        <div class="ai-message-content">
            <div class="ai-message-text">
                <span class="typing-indicator">‚óè‚óè‚óè</span>
            </div>
        </div>
    `;
    messagesDiv.appendChild(typingDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
    
    // Simulate AI response
    setTimeout(() => {
        typingDiv.remove();
        const response = getAIResponse(message);
        addChatMessage(response, 'ai');
    }, 1500);
}

function addChatMessage(text, sender) {
    const messagesDiv = document.getElementById('aiChatMessages');
    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    
    const messageDiv = document.createElement('div');
    messageDiv.className = sender === 'user' ? 'user-message' : 'ai-message';
    
    if (sender === 'user') {
        messageDiv.innerHTML = `
            <div class="user-message-avatar">üë§</div>
            <div class="user-message-content">
                <div class="user-message-text">${text}</div>
                <div class="ai-message-time">${time}</div>
            </div>
        `;
    } else {
        messageDiv.innerHTML = `
            <div class="ai-message-avatar">ü§ñ</div>
            <div class="ai-message-content">
                <div class="ai-message-text">${text}</div>
                <div class="ai-message-time">${time}</div>
            </div>
        `;
    }
    
    messagesDiv.appendChild(messageDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

function getAIResponse(message) {
    const msg = message.toLowerCase();
    
    // Deposit questions
    if (msg.includes('deposit') || msg.includes('fund')) {
        return "To deposit funds:\n\n1. Go to Dashboard ‚Üí Deposit\n2. Choose payment method (M-Pesa, Crypto, or Bank)\n3. Follow the instructions\n4. Upload payment proof\n\nDeposits are credited within 1-10 minutes after verification. Need help with a specific payment method?";
    }
    
    // Withdrawal questions
    if (msg.includes('withdraw') || msg.includes('cash out')) {
        return "To withdraw funds:\n\n1. Complete KYC verification first (required)\n2. Go to Dashboard ‚Üí Withdraw\n3. Enter amount and account details\n4. Submit request\n\nWithdrawals are processed within 1-24 hours. Have you completed KYC verification?";
    }
    
    // Bot trading questions
    if (msg.includes('bot') || msg.includes('automat') || msg.includes('ai trading')) {
        return "Our AI trading bots are powerful tools:\n\nüõ°Ô∏è Conservative Bot: 65% win rate, $3-$15 per trade\n‚öñÔ∏è Balanced Bot: 75% win rate, $10-$35 per trade\nüöÄ Aggressive Bot: 85% win rate, $20-$80 per trade\nü§ñ Expert Bot: 90% win rate, $30-$120 per trade\n\nGo to Dashboard ‚Üí AI Bots to get started. Would you like tips on choosing the right bot?";
    }
    
    // KYC/Verification questions
    if (msg.includes('kyc') || msg.includes('verif') || msg.includes('document')) {
        return "KYC verification is required for withdrawals. You'll need:\n\n‚úì Valid ID (Passport, National ID, or Driver's License)\n‚úì Selfie with ID\n‚úì Proof of address (utility bill or bank statement)\n\nGo to Dashboard ‚Üí Account Settings ‚Üí Verification to upload documents. Verification takes 1-24 hours. Need help with the process?";
    }
    
    // Referral questions
    if (msg.includes('referral') || msg.includes('invite') || msg.includes('bonus')) {
        return "Earn $25 for each friend you refer! üéÅ\n\n1. Go to Dashboard ‚Üí Referrals\n2. Copy your unique referral link\n3. Share with friends on WhatsApp, Facebook, etc.\n4. Both you and your friend get $25 when they sign up and verify\n\nEarnings are 100% withdrawable. Want me to show you the best ways to share your link?";
    }
    
    // Account/Balance questions
    if (msg.includes('balance') || msg.includes('account') || msg.includes('demo') || msg.includes('real')) {
        return "You have two account types:\n\nüéÆ Demo Account: Practice with $25 virtual money\nüí∞ Real Account: Trade with real funds, withdraw profits\n\nSwitch anytime in your dashboard. Demo profits can't be withdrawn, but it's perfect for learning. Ready to switch to real trading?";
    }
    
    // Trading questions
    if (msg.includes('trade') || msg.includes('buy') || msg.includes('sell')) {
        return "Ready to trade?\n\n1. Go to Dashboard ‚Üí Trade Now\n2. View live charts and market data\n3. Choose Buy (Long) or Sell (Short)\n4. Enter amount and execute\n\nOr use AI Bots for automated trading 24/7. Need help understanding the trading interface?";
    }
    
    // Security questions
    if (msg.includes('safe') || msg.includes('secure') || msg.includes('security')) {
        return "Your security is our priority:\n\n‚úì Bank-level encryption\n‚úì 2FA authentication available\n‚úì Secure payment processors\n‚úì Funds in segregated accounts\n‚úì 24/7 monitoring\n\nYour data and funds are protected. Have specific security concerns?";
    }
    
    // Support questions
    if (msg.includes('help') || msg.includes('support') || msg.includes('problem') || msg.includes('issue')) {
        return "I'm here to help! You can:\n\nüí¨ Continue chatting with me\nüé´ Create a support ticket (Dashboard ‚Üí Support)\nüìö Browse our FAQ section\nüìß Email support@cryptopro.com\n\nWhat specific issue can I help you with?";
    }
    
    // Profit questions
    if (msg.includes('profit') || msg.includes('earn') || msg.includes('make money')) {
        return "Ways to earn with CryptoPro:\n\nüìä Manual Trading: Execute your own trades\nü§ñ AI Bots: Automated trading 24/7\nüéÅ Referrals: $25 per successful referral\n\nStart with the demo account to practice, then switch to real trading when ready. Interested in learning more about any of these?";
    }
    
    // Default response
    return "Thanks for your message! I can help you with:\n\n‚Ä¢ Deposits & Withdrawals\n‚Ä¢ AI Bot Trading\n‚Ä¢ KYC Verification\n‚Ä¢ Referral Program\n‚Ä¢ Trading Questions\n‚Ä¢ Account Security\n\nWhat would you like to know more about?";
}

// ==================== UPDATE DASHBOARD WITH NEW FEATURES ====================
function updateDashboardWithAllFeatures() {
    const dashboardContainer = document.querySelector('#dashboardLayer .action-buttons');
    if (!dashboardContainer) return;
    
    dashboardContainer.innerHTML = '';
    
    const buttons = [
        { text: '‚ö° Trade Now', class: 'btn-trade', action: () => showLayer('tradingLayer') },
        { text: 'üí∞ Deposit', class: 'btn-deposit', action: () => showLayer('depositLayer') },
        { text: 'üí∏ Withdraw', class: 'btn-withdraw', action: () => showLayer('withdrawLayer') },
        { text: 'üìä Portfolio', class: 'btn-portfolio', action: () => showLayer('portfolioLayer') },
        { text: 'üéÅ Referrals', class: 'btn-referrals', action: () => showLayer('referralLayer') },
        { text: 'ü§ñ AI Bots', class: 'btn-referrals', action: () => showLayer('botsLayer') },
        { text: 'üìà History', class: 'btn-portfolio', action: () => showLayer('historyLayer') },
        { text: 'üí≥ Transactions', class: 'btn-portfolio', action: () => showLayer('transactionsLayer') },
        { text: 'üîî Notifications', class: 'btn-reviews', action: () => showLayer('notificationsLayer') },
        { text: '‚öôÔ∏è Settings', class: 'btn-portfolio', action: () => showLayer('settingsLayer') },
        { text: 'üé´ Support', class: 'btn-deposit', action: () => showLayer('supportLayer') },
        { text: 'üìö Education', class: 'btn-reviews', action: () => showLayer('educationLayer') },
        { text: 'üèÜ Leaderboard', class: 'btn-trade', action: () => showLayer('leaderboardLayer') },
        { text: 'üîî Price Alerts', class: 'btn-reviews', action: () => showLayer('alertsLayer') },
        { text: 'üîê KYC', class: 'btn-withdraw', action: () => showLayer('kycLayer') }
    ];
    
    buttons.forEach(btn => {
        const button = document.createElement('button');
        button.className = `action-btn ${btn.class}`;
        button.textContent = btn.text;
        button.onclick = btn.action;
        dashboardContainer.appendChild(button);
    });
}

// Update the original initDashboard
const originalInitDashboard3 = initDashboard;
initDashboard = function() {
    if (originalInitDashboard3) originalInitDashboard3();
    updateDashboardWithAllFeatures();
    initReferralData();
    
    // Update withdraw available balance
    const withdrawBalance = document.getElementById('withdrawAvailableBalance');
    if (withdrawBalance) withdrawBalance.textContent = '$' + realBalance.toFixed(2);
    
    // Load settings if user is logged in
    if (currentUser) {
        document.getElementById('settingsName').value = currentUser.name || '';
        document.getElementById('settingsEmail').value = currentUser.email || '';
        document.getElementById('settingsPhone').value = currentUser.phone || '';
    }
    
    // Initialize notifications
    renderNotifications();
    renderTickets();
    renderPriceAlerts();
};

// Update showLayer for new layers
const originalShowLayer3 = showLayer;
showLayer = function(layerId) {
    originalShowLayer3(layerId);
    
    if (layerId === 'leaderboardLayer') {
        showLeaderboard('profit');
        document.getElementById('userRank').textContent = '#' + Math.floor(Math.random() * 500 + 50);
    }
    
    if (layerId === 'educationLayer') {
        // Education layer initialization if needed
    }
    
    if (layerId === 'settingsLayer') {
        // Initialize login history
        const loginHistory = document.getElementById('loginHistory');
        if (loginHistory) {
            loginHistory.innerHTML = `
                <div style="background: var(--bg-tertiary); padding: 16px; border-radius: 8px; margin-bottom: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px;">üåç Current Session</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">Device: Desktop ‚Ä¢ Location: Kenya</div>
                        </div>
                        <div style="font-size: 12px; color: var(--accent-green);">Active Now</div>
                    </div>
                </div>
            `;
        }
    }
};

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    // Add some initial notifications for demo
    addNotification('Welcome to CryptoPro! üéâ', 'system');
    addNotification('Your account is ready to trade', 'system');
    
    // Show AI chat button
    setTimeout(() => {
        document.querySelector('.ai-chat-button').style.animation = 'pulse 2s infinite';
    }, 2000);
});

console.log('‚úÖ All Features Loaded - Layers 1-20 Complete!');
console.log('üöÄ New Features:');
console.log('   - KYC Verification System');
console.log('   - AI Chat Support');
console.log('   - Support Tickets & FAQ');
console.log('   - Notifications Center');
console.log('   - Account Settings & Security');
console.log('   - Transaction History');
console.log('   - Education Center');
console.log('   - Leaderboard System');
console.log('   - Price Alerts');
console.log('   - 2FA Setup');
console.log('   - Theme Settings');
console.log('üéâ Platform Ready!');
</script>

</body>
</html>
